import{a1 as d,L as v,ai as p,aj as u,ak as i,al as m,a9 as r,a6 as k,an as q,E as h,aa as B,ad as $,W as E,U as M,aU as I,aR as g,aS as F,av as j,aw as N,ag as P,ap as S,am as A,p as C,ax as U,ay as T}from"../jse/index-index-dOqq_LZr.js";import{bp as b,b9 as D,bq as x,c5 as L,a8 as V,c6 as W}from"./bootstrap-CQbOoz5A.js";const[R,G]=D("AvatarRoot");var H=d({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){return b(),G({imageLoadingStatus:v("idle")}),(e,t)=>(u(),p(r(x),{"as-child":e.asChild,as:e.as},{default:i(()=>[m(e.$slots,"default")]),_:3},8,["as-child","as"]))}}),J=H,K=d({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const e=a,t=R();b();const l=v(e.delayMs===void 0);return k(o=>{if(e.delayMs&&L){const n=window.setTimeout(()=>{l.value=!0},e.delayMs);o(()=>{window.clearTimeout(n)})}}),(o,n)=>l.value&&r(t).imageLoadingStatus.value!=="loaded"?(u(),p(r(x),{key:0,"as-child":o.asChild,as:o.as},{default:i(()=>[m(o.$slots,"default")]),_:3},8,["as-child","as"])):q("v-if",!0)}}),O=K;function z(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Q(a,{referrerPolicy:e,crossOrigin:t}={}){const l=v(!1),o=v(null),n=h(()=>l.value?(!o.value&&L&&(o.value=new window.Image),o.value):null),c=v(z(n.value,a.value)),_=f=>()=>{l.value&&(c.value=f)};return B(()=>{l.value=!0,k(f=>{const s=n.value;if(!s)return;c.value=z(s,a.value);const y=_("loaded"),w=_("error");s.addEventListener("load",y),s.addEventListener("error",w),e!=null&&e.value&&(s.referrerPolicy=e.value),typeof(t==null?void 0:t.value)=="string"&&(s.crossOrigin=t.value),f(()=>{s.removeEventListener("load",y),s.removeEventListener("error",w)})})}),$(()=>{l.value=!1}),c}var X=d({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(a,{emit:e}){const t=a,l=e,{src:o,referrerPolicy:n,crossOrigin:c}=E(t);b();const _=R(),f=Q(o,{referrerPolicy:n,crossOrigin:c});return M(f,s=>{l("loadingStatusChange",s),s!=="idle"&&(_.imageLoadingStatus.value=s)},{immediate:!0}),(s,y)=>I((u(),p(r(x),{role:"img","as-child":s.asChild,as:s.as,src:r(o),"referrer-policy":r(n)},{default:i(()=>[m(s.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[V,r(f)==="loaded"]])}}),Y=X;const Z=W("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{shape:{circle:"rounded-full",square:"rounded-md"},size:{base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl",sm:"h-10 w-10 text-xs"}}}),ee=d({__name:"Avatar",props:{class:{},shape:{default:"circle"},size:{default:"sm"}},setup(a){const e=a;return(t,l)=>(u(),p(r(J),{class:g(r(F)(r(Z)({size:a.size,shape:a.shape}),e.class))},{default:i(()=>[m(t.$slots,"default")]),_:3},8,["class"]))}}),ae=d({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(a){const e=a;return(t,l)=>(u(),p(r(O),j(N(e)),{default:i(()=>[m(t.$slots,"default")]),_:3},16))}}),te=d({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(a){const e=a;return(t,l)=>(u(),p(r(Y),P(e,{class:"h-full w-full object-cover"}),null,16))}}),le=d({inheritAttrs:!1,__name:"avatar",props:{alt:{default:"avatar"},class:{},dot:{type:Boolean,default:!1},dotClass:{default:"bg-green-500"},fit:{default:"cover"},size:{},delayMs:{},asChild:{type:Boolean},as:{default:"button"},src:{},referrerPolicy:{},crossOrigin:{}},setup(a){const e=a,t=h(()=>{const{fit:n}=e;return n?{objectFit:n}:{}}),l=h(()=>e.alt.slice(-2).toUpperCase()),o=h(()=>e.size!==void 0&&e.size>0?{height:`${e.size}px`,width:`${e.size}px`}:{});return(n,c)=>(u(),S("div",{class:g([e.class,"relative flex flex-shrink-0 items-center"]),style:A(o.value)},[C(r(ee),{class:g([e.class,"size-full"])},{default:i(()=>[C(r(te),{alt:a.alt,src:a.src,style:A(t.value)},null,8,["alt","src","style"]),C(r(ae),null,{default:i(()=>[U(T(l.value),1)]),_:1})]),_:1},8,["class"]),a.dot?(u(),S("span",{key:0,class:g([a.dotClass,"absolute bottom-0 right-0 size-3 rounded-full border-2 border-background"])},null,2)):q("",!0)],6))}});export{le as _};
