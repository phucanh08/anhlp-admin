var $=(b,v,m)=>new Promise((p,S)=>{var a=n=>{try{y(m.next(n))}catch(i){S(i)}},k=n=>{try{y(m.throw(n))}catch(i){S(i)}},y=n=>n.done?p(n.value):Promise.resolve(n.value).then(a,k);y((m=m.apply(b,v)).next())});import{ab as w,ad as R,ac as D,T as N,B as r,ae as V}from"./bootstrap-CmOIY23B.js";import{C as c}from"./index-18-lVBa-.js";import{d as g,c as T,z as x,q as _,a4 as j,D as u,n as d,E as t,j as o,u as e,H as l,v as U,A as q,a2 as A}from"../jse/index-index-Dn7Pga_E.js";import{_ as z}from"./page.vue_vue_type_script_setup_true_lang-B79NNVXE.js";import"./index-Cq5upoUv.js";import"./shallowequal-BOWVaEXw.js";import"./Trigger-B0Zd1YSB.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./collapse-BuqCI_Sc.js";import"./Overflow-D-n6m9kG.js";import"./index-bMV-OEX7.js";import"./index-BuhGstFT.js";import"./colors-CDlQsefj.js";import"./collapseMotion-CW4DPm-L.js";import"./slide-DCDZKjHj.js";import"./useRefs-DsN55d7I.js";import"./hasIn-1TLaJpEW.js";import"./isMobile-8sZ0LT6r.js";import"./useMergedState-DAlpYor9.js";import"./isPlainObject-Cfyj4D1A.js";const C=g({name:"AccessControl",__name:"access-control",props:{codes:{default:()=>[]},type:{default:"role"}},setup(b){const v=b,{hasAccessByCodes:m,hasAccessByRoles:p}=w(),S=T(()=>{const{codes:a,type:k}=v;return k==="role"?p(a):m(a)});return(a,k)=>b.codes?S.value?x(a.$slots,"default",{key:1}):_("",!0):x(a.$slots,"default",{key:0})}}),E={class:"mx-4 text-lg text-primary"},ls=g({__name:"button-control",setup(b){const v={admin:{password:"123456",username:"admin"},super:{password:"123456",username:"vben"},user:{password:"123456",username:"jack"}},{accessMode:m,hasAccessByCodes:p}=w(),S=R(),a=D(),k=N();function y(i){return a.userRoles.includes(i)?"primary":"default"}function n(i){return $(this,null,function*(){if(a.userRoles.includes(i))return;const s=v[i];V(),s&&(yield S.authLogin(s,()=>$(null,null,function*(){k.go(0)})))})}return(i,s)=>{const f=j("access");return d(),u(e(z),{title:`${e(m)==="frontend"?"前端":"后端"}按钮访问权限演示`,description:"切换不同的账号，观察按钮变化。"},{default:t(()=>[o(e(c),{class:"mb-5"},{title:t(()=>{var B;return[s[3]||(s[3]=U("span",{class:"font-semibold"},"当前角色:",-1)),U("span",E,q((B=e(a).userRoles)==null?void 0:B[0]),1)]}),default:t(()=>[o(e(r),{type:y("super"),onClick:s[0]||(s[0]=B=>n("super"))},{default:t(()=>[...s[4]||(s[4]=[l(" 切换为 Super 账号 ",-1)])]),_:1},8,["type"]),o(e(r),{type:y("admin"),class:"mx-4",onClick:s[1]||(s[1]=B=>n("admin"))},{default:t(()=>[...s[5]||(s[5]=[l(" 切换为 Admin 账号 ",-1)])]),_:1},8,["type"]),o(e(r),{type:y("user"),onClick:s[2]||(s[2]=B=>n("user"))},{default:t(()=>[...s[6]||(s[6]=[l(" 切换为 User 账号 ",-1)])]),_:1},8,["type"])]),_:1}),o(e(c),{class:"mb-5",title:"组件形式控制 - 权限码"},{default:t(()=>[o(e(C),{codes:["AC_100100"],type:"code"},{default:t(()=>[o(e(r),{class:"mr-4"},{default:t(()=>[...s[7]||(s[7]=[l(' Super 账号可见 ["AC_100100"] ',-1)])]),_:1})]),_:1}),o(e(C),{codes:["AC_100030"],type:"code"},{default:t(()=>[o(e(r),{class:"mr-4"},{default:t(()=>[...s[8]||(s[8]=[l(' Admin 账号可见 ["AC_100030"] ',-1)])]),_:1})]),_:1}),o(e(C),{codes:["AC_1000001"],type:"code"},{default:t(()=>[o(e(r),{class:"mr-4"},{default:t(()=>[...s[9]||(s[9]=[l(' User 账号可见 ["AC_1000001"] ',-1)])]),_:1})]),_:1}),o(e(C),{codes:["AC_100100","AC_100030"],type:"code"},{default:t(()=>[o(e(r),{class:"mr-4"},{default:t(()=>[...s[10]||(s[10]=[l(' Super & Admin 账号可见 ["AC_100100","AC_100030"] ',-1)])]),_:1})]),_:1})]),_:1}),e(m)==="frontend"?(d(),u(e(c),{key:0,class:"mb-5",title:"组件形式控制 - 角色"},{default:t(()=>[o(e(C),{codes:["super"],type:"role"},{default:t(()=>[o(e(r),{class:"mr-4"},{default:t(()=>[...s[11]||(s[11]=[l(" Super 角色可见 ",-1)])]),_:1})]),_:1}),o(e(C),{codes:["admin"],type:"role"},{default:t(()=>[o(e(r),{class:"mr-4"},{default:t(()=>[...s[12]||(s[12]=[l(" Admin 角色可见 ",-1)])]),_:1})]),_:1}),o(e(C),{codes:["user"],type:"role"},{default:t(()=>[o(e(r),{class:"mr-4"},{default:t(()=>[...s[13]||(s[13]=[l(" User 角色可见 ",-1)])]),_:1})]),_:1}),o(e(C),{codes:["super","admin"],type:"role"},{default:t(()=>[o(e(r),{class:"mr-4"},{default:t(()=>[...s[14]||(s[14]=[l(" Super & Admin 角色可见 ",-1)])]),_:1})]),_:1})]),_:1})):_("",!0),o(e(c),{class:"mb-5",title:"函数形式控制"},{default:t(()=>[e(p)(["AC_100100"])?(d(),u(e(r),{key:0,class:"mr-4"},{default:t(()=>[...s[15]||(s[15]=[l(' Super 账号可见 ["AC_100100"] ',-1)])]),_:1})):_("",!0),e(p)(["AC_100030"])?(d(),u(e(r),{key:1,class:"mr-4"},{default:t(()=>[...s[16]||(s[16]=[l(' Admin 账号可见 ["AC_100030"] ',-1)])]),_:1})):_("",!0),e(p)(["AC_1000001"])?(d(),u(e(r),{key:2,class:"mr-4"},{default:t(()=>[...s[17]||(s[17]=[l(' User 账号可见 ["AC_1000001"] ',-1)])]),_:1})):_("",!0),e(p)(["AC_100100","AC_100030"])?(d(),u(e(r),{key:3,class:"mr-4"},{default:t(()=>[...s[18]||(s[18]=[l(' Super & Admin 账号可见 ["AC_100100","AC_100030"] ',-1)])]),_:1})):_("",!0)]),_:1}),o(e(c),{class:"mb-5",title:"指令方式 - 权限码"},{default:t(()=>[A((d(),u(e(r),{class:"mr-4"},{default:t(()=>[...s[19]||(s[19]=[l(' Super 账号可见 ["AC_100100"] ',-1)])]),_:1})),[[f,["AC_100100"],"code"]]),A((d(),u(e(r),{class:"mr-4"},{default:t(()=>[...s[20]||(s[20]=[l(' Admin 账号可见 ["AC_100030"] ',-1)])]),_:1})),[[f,["AC_100030"],"code"]]),A((d(),u(e(r),{class:"mr-4"},{default:t(()=>[...s[21]||(s[21]=[l(' User 账号可见 ["AC_1000001"] ',-1)])]),_:1})),[[f,["AC_1000001"],"code"]]),A((d(),u(e(r),{class:"mr-4"},{default:t(()=>[...s[22]||(s[22]=[l(' Super & Admin 账号可见 ["AC_100100","AC_100030"] ',-1)])]),_:1})),[[f,["AC_100100","AC_100030"],"code"]])]),_:1}),e(m)==="frontend"?(d(),u(e(c),{key:1,class:"mb-5",title:"指令方式 - 角色"},{default:t(()=>[A((d(),u(e(r),{class:"mr-4"},{default:t(()=>[...s[23]||(s[23]=[l(" Super 角色可见 ",-1)])]),_:1})),[[f,["super"],"role"]]),A((d(),u(e(r),{class:"mr-4"},{default:t(()=>[...s[24]||(s[24]=[l(" Admin 角色可见 ",-1)])]),_:1})),[[f,["admin"],"role"]]),A((d(),u(e(r),{class:"mr-4"},{default:t(()=>[...s[25]||(s[25]=[l(" User 角色可见 ",-1)])]),_:1})),[[f,["user"],"role"]]),A((d(),u(e(r),{class:"mr-4"},{default:t(()=>[...s[26]||(s[26]=[l(" Super & Admin 角色可见 ",-1)])]),_:1})),[[f,["super","admin"],"role"]])]),_:1})):_("",!0)]),_:1},8,["title"])}}});export{ls as default};
