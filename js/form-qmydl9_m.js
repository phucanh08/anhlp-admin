var Se=Object.defineProperty;var oe=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var ue=(e,c,l)=>c in e?Se(e,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[c]=l,ne=(e,c)=>{for(var l in c||(c={}))we.call(c,l)&&ue(e,l,c[l]);if(oe)for(var l of oe(c))Ee.call(c,l)&&ue(e,l,c[l]);return e};var q=(e,c,l)=>new Promise((t,K)=>{var r=s=>{try{v(l.next(s))}catch(F){K(F)}},C=s=>{try{v(l.throw(s))}catch(F){K(F)}},v=s=>s.done?t(s.value):Promise.resolve(s.value).then(r,C);v((l=l.apply(e,c)).next())});import{q as Ke,cg as Te,bw as Ie,aV as de,aU as Be,ch as Ne,a9 as ye,Y as le,Z as U,by as De,ci as Re,bC as se,cj as Pe,bz as Ve,ck as ce,cl as x,cm as fe,cn as ve,a_ as ge,co as qe,v as he,$ as k,E as ae,y as $e,z as Le}from"./bootstrap-CmOIY23B.js";import{S as Me}from"./index-DsnPyS7F.js";import{r as z,d as ee,aa as ze,c as H,D as L,n as I,E as $,j as G,u as d,z as _,C as be,G as X,L as me,M as Oe,e as Ge,a as je,x as W,y as J,m as Z,q as j,v as Q,I as Ce,H as xe,A as ie,F as Ue,aK as ke,R as pe,ac as He,S as Ye}from"../jse/index-index-Dn7Pga_E.js";import{f as re}from"./arrays-BGMUzFOO.js";import{u as We}from"./use-drawer-BWYtXBhV.js";const Ze=Ke("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);function _e(e,c){const l=z(),t=(r,C)=>{if(c.multiple&&Array.isArray(e.value))if(c.selectionBehavior==="replace")e.value=[r],l.value=r;else{const v=e.value.findIndex(s=>C(s));v!==-1?e.value=e.value.filter((s,F)=>F!==v):e.value=[...e.value,r]}else c.selectionBehavior==="replace"?e.value=ne({},r):!Array.isArray(e.value)&&C(e.value)?e.value=void 0:e.value=ne({},r);return e.value};function K(r,C,v,s){var D;if(!(l!=null&&l.value)||!c.multiple||!Array.isArray(e.value))return;const w=(D=v().filter(N=>N.ref.dataset.disabled!=="").find(N=>N.ref===C))==null?void 0:D.value;if(!w)return;let T=null;switch(r){case"prev":case"next":{T=re(s,l.value,w);break}case"first":{T=re(s,l.value,s==null?void 0:s[0]);break}case"last":{T=re(s,l.value,s==null?void 0:s[s.length-1]);break}}e.value=T}return{firstValue:l,onSelectItem:t,handleMultipleReplace:K}}function te(e){return e.reduce((c,l)=>(c.push(l),l.children&&c.push(...te(l.children)),c),[])}const[Je,Qe]=Be("TreeRoot");var Xe=ee({__name:"TreeRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},items:{type:Array,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},getKey:{type:Function,required:!0},getChildren:{type:Function,required:!1,default:e=>e.children},selectionBehavior:{type:String,required:!1,default:"toggle"},multiple:{type:Boolean,required:!1,skipCheck:!0},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},propagateSelect:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ul"}},emits:["update:modelValue","update:expanded"],setup(e,{emit:c}){var u,m;const l=e,t=c,{items:K,multiple:r,disabled:C,propagateSelect:v,dir:s,bubbleSelect:F}=ze(l),{handleTypeaheadSearch:w}=Te(),T=Ie(s),D=z(),N=z(!1),Y=Ne(),f=de(l,"modelValue",t,{defaultValue:(u=l.defaultValue)!=null?u:r.value?[]:void 0,passive:!0,deep:!0}),b=de(l,"expanded",t,{defaultValue:(m=l.defaultExpanded)!=null?m:[],passive:l.expanded===void 0,deep:!0}),{onSelectItem:i,handleMultipleReplace:g}=_e(f,l),A=H(()=>{var o;return r.value&&Array.isArray(f.value)?f.value.map(a=>l.getKey(a)):[l.getKey((o=f.value)!=null?o:{})]});function E(o,a=1,h){return o.reduce((y,S,p)=>{const B=l.getKey(S),R=l.getChildren(S),V=b.value.includes(B),Ae={_id:B,value:S,index:p,level:a,parentItem:h,hasChildren:!!R,bind:{value:S,level:a,"aria-setsize":o.length,"aria-posinset":p+1}};return y.push(Ae),R&&V&&y.push(...E(R,a+1,S)),y},[])}const M=H(()=>{const o=l.items;return b.value.map(a=>a),E(o!=null?o:[])});function O(o){var a,h;if(N.value)Y.trigger(o);else{const y=(h=(a=D.value)==null?void 0:a.getItems())!=null?h:[];w(o.key,y)}}function P(o){if(N.value)return;const a=Re[o.key];be(()=>{var h;g(a,se(),(h=D.value)==null?void 0:h.getItems,M.value.map(y=>y.value))})}function n(o){var a;if(o.parentItem!=null&&Array.isArray(f.value)&&l.multiple){const h=M.value.find(y=>o.parentItem!=null&&l.getKey(y.value)===l.getKey(o.parentItem));h!=null&&(((a=l.getChildren(h.value))==null?void 0:a.every(S=>f.value.find(p=>l.getKey(p)===l.getKey(S))))?f.value=[...f.value,h.value]:f.value=f.value.filter(S=>l.getKey(S)!==l.getKey(h.value)),n(h))}}return Qe({modelValue:f,selectedKeys:A,onSelect:o=>{var y,S;const a=p=>l.getKey(p!=null?p:{})===l.getKey(o),h=l.multiple&&Array.isArray(f.value)?((y=f.value)==null?void 0:y.findIndex(a))!==-1:void 0;if(i(o,a),l.bubbleSelect&&l.multiple&&Array.isArray(f.value)){const p=M.value.find(B=>l.getKey(B.value)===l.getKey(o));p!=null&&n(p)}if(l.propagateSelect&&l.multiple&&Array.isArray(f.value)){const p=te((S=l.getChildren(o))!=null?S:[]);h?f.value=[...f.value].filter(B=>!p.some(R=>l.getKey(B!=null?B:{})===l.getKey(R))):f.value=[...f.value,...p]}},expanded:b,onToggle(o){var y;if(!(o?l.getChildren(o):void 0))return;const h=(y=l.getKey(o))!=null?y:o;b.value.includes(h)?b.value=b.value.filter(S=>S!==h):b.value.push(h)},getKey:l.getKey,getChildren:l.getChildren,items:K,expandedItems:M,disabled:C,multiple:r,dir:T,propagateSelect:v,bubbleSelect:F,isVirtual:N,virtualKeydownHook:Y,handleMultipleReplace:g}),(o,a)=>(I(),L(d(De),{ref_key:"rovingFocusGroupRef",ref:D,"as-child":"",orientation:"vertical",dir:d(T)},{default:$(()=>[G(d(ye),{role:"tree",as:o.as,"as-child":o.asChild,"aria-multiselectable":d(r)?!0:void 0,onKeydown:[O,le(U(P,["shift"]),["up","down"])]},{default:$(()=>[_(o.$slots,"default",{flattenItems:M.value,modelValue:d(f),expanded:d(b)})]),_:3},8,["as","as-child","aria-multiselectable","onKeydown"])]),_:3},8,["dir"]))}}),el=Xe;const ll="tree.select",tl="tree.toggle";var al=ee({inheritAttrs:!1,__name:"TreeItem",props:{value:{type:null,required:!0},level:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["select","toggle"],setup(e,{expose:c,emit:l}){const t=e,K=l,r=Je(),{getItems:C}=Pe(),v=H(()=>!!r.getChildren(t.value)),s=H(()=>{const i=r.getKey(t.value);return r.expanded.value.includes(i)}),F=H(()=>{const i=r.getKey(t.value);return r.selectedKeys.value.includes(i)}),w=H(()=>{if(r.bubbleSelect.value&&v.value&&Array.isArray(r.modelValue.value)){const i=te(r.getChildren(t.value)||[]);return i.some(g=>r.modelValue.value.find(A=>r.getKey(A)===r.getKey(g)))&&!i.every(g=>r.modelValue.value.find(A=>r.getKey(A)===r.getKey(g)))}else return r.propagateSelect.value&&F.value&&v.value&&Array.isArray(r.modelValue.value)?!te(r.getChildren(t.value)||[]).every(g=>r.modelValue.value.find(A=>r.getKey(A)===r.getKey(g))):void 0});function T(i){if(v.value)if(s.value){const g=C().map(P=>P.ref),A=se(),E=g.indexOf(A),O=[...g].slice(E).find(P=>Number(P.getAttribute("data-indent"))===t.level+1);O&&O.focus()}else b(i)}function D(i){if(s.value)b(i);else{const g=C().map(P=>P.ref),A=se(),E=g.indexOf(A),O=[...g].slice(0,E).reverse().find(P=>Number(P.getAttribute("data-indent"))===t.level-1);O&&O.focus()}}function N(i){return q(this,null,function*(){K("select",i),!(i!=null&&i.defaultPrevented)&&r.onSelect(t.value)})}function Y(i){return q(this,null,function*(){K("toggle",i),!(i!=null&&i.defaultPrevented)&&r.onToggle(t.value)})}function f(i){return q(this,null,function*(){if(!i)return;const g={originalEvent:i,value:t.value,isExpanded:s.value,isSelected:F.value};ce(ll,N,g)})}function b(i){return q(this,null,function*(){if(!i)return;const g={originalEvent:i,value:t.value,isExpanded:s.value,isSelected:F.value};ce(tl,Y,g)})}return c({isExpanded:s,isSelected:F,isIndeterminate:w,handleToggle:()=>r.onToggle(t.value),handleSelect:()=>r.onSelect(t.value)}),(i,g)=>(I(),L(d(Ve),{"as-child":"",value:i.value,"allow-shift-key":""},{default:$(()=>[G(d(ye),X(i.$attrs,{role:"treeitem",as:i.as,"as-child":i.asChild,"aria-selected":F.value,"aria-expanded":v.value?s.value:void 0,"aria-level":i.level,"data-indent":i.level,"data-selected":F.value?"":void 0,"data-expanded":s.value?"":void 0,onKeydown:[le(U(f,["self","prevent"]),["enter","space"]),g[0]||(g[0]=le(U(A=>d(r).dir.value==="ltr"?T(A):D(A),["prevent"]),["right"])),g[1]||(g[1]=le(U(A=>d(r).dir.value==="ltr"?D(A):T(A),["prevent"]),["left"]))],onClick:g[2]||(g[2]=U(A=>{f(A),b(A)},["stop"]))}),{default:$(()=>[_(i.$slots,"default",{isExpanded:s.value,isSelected:F.value,isIndeterminate:w.value,handleSelect:()=>d(r).onSelect(i.value),handleToggle:()=>d(r).onToggle(i.value)})]),_:3},16,["as","as-child","aria-selected","aria-expanded","aria-level","data-indent","data-selected","data-expanded","onKeydown"])]),_:3},8,["value"]))}}),nl=al;function Fe(){return{allowClear:!1,autoCheckParent:!0,bordered:!1,checkStrictly:!1,defaultExpandedKeys:()=>[],defaultExpandedLevel:0,disabled:!1,disabledField:"disabled",iconField:"icon",labelField:"label",multiple:!1,showIcon:!0,transition:!0,valueField:"value",childrenField:"children"}}const rl={key:1,class:"h-4 w-4"},sl={class:"flex items-center gap-1"},il=["onClick"],ol=ee({__name:"tree",props:me(ke({allowClear:{type:Boolean},autoCheckParent:{type:Boolean},bordered:{type:Boolean},checkStrictly:{type:Boolean},childrenField:{},defaultExpandedKeys:{},defaultExpandedLevel:{},defaultValue:{},disabled:{type:Boolean},disabledField:{},getNodeClass:{type:Function},iconField:{},labelField:{},multiple:{type:Boolean},showIcon:{type:Boolean},transition:{type:Boolean},treeData:{},valueField:{}},Fe()),{modelValue:{},modelModifiers:{}}),emits:me(["expand","select"],["update:modelValue"]),setup(e,{expose:c,emit:l}){var P;const t=e,K=l;function r(n,u="children",m=0,o=null,a=[]){const h=[];return n.forEach(y=>{const S=x(y,u),p=x(y,t.valueField),B={hasChildren:Array.isArray(S)&&S.length>0,id:p,level:m,parentId:o,parents:[...a],value:y};h.push(B),B.hasChildren&&h.push(...r(S,u,m+1,p,[...a,p]))}),h}const C=z([]),v=Oe(e,"modelValue"),s=z((P=t.defaultExpandedKeys)!=null?P:[]),F=z();Ge(()=>{je(()=>{C.value=r(t.treeData,t.childrenField),T(),t.defaultExpandedLevel!==void 0&&t.defaultExpandedLevel>0&&N(t.defaultExpandedLevel)})});function w(n){var u;return(u=C.value.find(m=>x(m.value,t.valueField)===n))==null?void 0:u.value}function T(){const n=v.value;if(n===void 0)F.value=void 0;else if(Array.isArray(n)){const u=n.filter(m=>{const o=w(m);return o&&!x(o,t.disabledField)});F.value=u.map(m=>w(m)),u.length!==n.length&&(v.value=u)}else{const u=w(n);u&&!x(u,t.disabledField)?F.value=u:(F.value=void 0,v.value=void 0)}}function D(n){if(Array.isArray(n)){const u=n.filter(m=>!x(m,t.disabledField));v.value=u.map(m=>x(m,t.valueField))}else n&&!x(n,t.disabledField)&&(v.value=x(n,t.valueField))}function N(n){const u=[];C.value.forEach(m=>{m.level<=n-1&&u.push(x(m.value,t.valueField))}),s.value=u}function Y(n){const u=new Set(Array.isArray(n)?n:[n]);s.value=s.value.filter(m=>!u.has(m))}function f(n){[...Array.isArray(n)?n:[n]].forEach(m=>{if(s.value.includes(m))return;w(m)&&s.value.push(m)})}function b(){s.value=C.value.filter(n=>n.hasChildren).map(n=>x(n.value,t.valueField))}function i(){s.value=[]}function g(){t.multiple&&(v.value=[...new Set(C.value.filter(n=>!x(n.value,t.disabledField)).map(n=>x(n.value,t.valueField)))],T())}function A(){t.multiple&&(v.value=[],T())}function E(n){return t.disabled||x(n.value,t.disabledField)}function M(n){K("expand",n)}function O(n,u){var m,o,a,h,y,S;E(n)||(!t.checkStrictly&&t.multiple&&t.autoCheckParent&&u&&((a=(o=(m=C.value.find(p=>x(p.value,t.valueField)===x(n.value,t.valueField)))==null?void 0:m.parents)==null?void 0:o.filter(p=>!x(p,t.disabledField)))==null||a.forEach(p=>{Array.isArray(v.value)&&!v.value.includes(p)&&v.value.push(p)})),!t.checkStrictly&&t.multiple&&t.autoCheckParent&&!u&&((S=(y=(h=C.value.find(p=>x(p.value,t.valueField)===x(n.value,t.valueField)))==null?void 0:h.parents)==null?void 0:y.filter(p=>!x(p,t.disabledField)))==null||S.toReversed().forEach(p=>{const B=C.value.filter(R=>R.parents.length>0&&R.parents.includes(p)&&R.id!==n._id&&R.parentId===p);if(Array.isArray(v.value)&&!B.some(V=>v.value.includes(x(V.value,t.valueField)))){const V=v.value.indexOf(p);V!==-1&&v.value.splice(V,1)}})),T(),K("select",n))}return c({collapseAll:i,collapseNodes:Y,expandAll:b,expandNodes:f,checkAll:g,unCheckAll:A,expandToLevel:N,getItemByValue:w}),(n,u)=>(I(),L(d(el),{"get-key":m=>d(x)(m,e.valueField),"get-children":m=>d(x)(m,e.childrenField),items:e.treeData,"model-value":F.value,expanded:s.value,"onUpdate:expanded":u[3]||(u[3]=m=>s.value=m),"default-expanded":e.defaultExpandedKeys,"propagate-select":!e.checkStrictly,multiple:e.multiple,disabled:e.disabled,"selection-behavior":e.allowClear||e.multiple?"toggle":"replace","onUpdate:modelValue":D,class:W(d(J)("text-blackA11 container select-none list-none rounded-lg text-sm font-medium",n.$attrs.class,e.bordered?"border":""))},{default:$(({flattenItems:m})=>{var o;return[n.$slots.header?(I(),Z("div",{key:0,class:W(d(J)("my-0.5 flex w-full items-center p-1",e.bordered?"border-b":""))},[_(n.$slots,"header",{},void 0,!0)],2)):j("",!0),e.treeData.length>0?(I(),Z("div",{key:1,class:W(d(J)("my-0.5 flex w-full items-center p-1",e.bordered?"border-b":""))},[Q("div",{class:"flex size-5 flex-1 cursor-pointer items-center",onClick:u[2]||(u[2]=()=>{var a;return((a=s.value)==null?void 0:a.length)>0?i():b()})},[G(d(fe),{class:W([{"rotate-90":((o=s.value)==null?void 0:o.length)>0},"size-4 cursor-pointer text-foreground/80 transition hover:text-foreground"])},null,8,["class"]),e.multiple?(I(),L(d(ve),{key:0,onClick:u[0]||(u[0]=U(()=>{},["stop"])),"onUpdate:modelValue":u[1]||(u[1]=a=>a===!0?g():A())})):j("",!0)])],2)):j("",!0),G(qe,{name:e.transition?"fade":""},{default:$(()=>[(I(!0),Z(Ue,null,Ce(m,a=>{var h;return I(),L(d(nl),X({key:a._id,style:{"margin-left":`${a.level-1}rem`},class:d(J)("cursor-pointer",(h=e.getNodeClass)==null?void 0:h.call(e,a),{"data-[selected]:bg-accent":!e.multiple,"cursor-not-allowed text-foreground/50":E(a)})},{ref_for:!0},Object.assign(a.bind,{onfocus:E(a)?"this.blur()":void 0,disabled:E(a)}),{onSelect:y=>{if(E(a)){y.preventDefault(),y.stopPropagation();return}y.detail.originalEvent.type==="click"&&y.preventDefault(),O(a,y.detail.isSelected)},onToggle:y=>{y.detail.originalEvent.type==="click"&&y.preventDefault(),!E(a)&&M(a)},class:"tree-node focus:ring-grass8 my-0.5 flex items-center rounded p-1 outline-none focus:ring-2"}),{default:$(({isExpanded:y,isSelected:S,isIndeterminate:p,handleSelect:B,handleToggle:R})=>[a.hasChildren&&Array.isArray(a.value[e.childrenField])&&a.value[e.childrenField].length>0?(I(),L(d(fe),{key:0,class:W(["size-4 cursor-pointer text-foreground/80 transition hover:text-foreground",{"rotate-90":y}]),onClick:U(()=>{R(),M(a)},["stop"])},null,8,["class","onClick"])):(I(),Z("div",rl)),Q("div",sl,[e.multiple?(I(),L(d(ve),{key:0,"model-value":S&&!E(a),disabled:E(a),indeterminate:p&&!E(a),onClick:V=>{if(E(a)){V.preventDefault(),V.stopPropagation();return}B()}},null,8,["model-value","disabled","indeterminate","onClick"])):j("",!0),Q("div",{class:"flex items-center gap-1",onClick:V=>{if(E(a)){V.preventDefault(),V.stopPropagation();return}B()}},[_(n.$slots,"node",X({ref_for:!0},a),()=>[e.showIcon&&d(x)(a.value,e.iconField)?(I(),L(d(ge),{key:0,class:"size-4",icon:d(x)(a.value,e.iconField)},null,8,["icon"])):j("",!0),xe(" "+ie(d(x)(a.value,e.labelField)),1)],!0)],8,il)]),u[4]||(u[4]=Q("div",{class:"h-4 w-4"},null,-1))]),_:2},1040,["style","class","onSelect","onToggle"])}),128))]),_:2},1032,["name"]),n.$slots.footer?(I(),Z("div",{key:2,class:W(d(J)("my-0.5 flex w-full items-center p-1",e.bordered?"border-t":""))},[_(n.$slots,"footer",{},void 0,!0)],2)):j("",!0)]}),_:3},8,["get-key","get-children","items","model-value","expanded","default-expanded","propagate-select","multiple","disabled","selection-behavior","class"]))}}),ul=he(ol,[["__scopeId","data-v-8210dac1"]]),dl={key:1,class:"flex-col-center text-muted-foreground cursor-pointer rounded-lg border p-10 text-sm font-medium"},cl={class:"mt-1"},fl=ee({__name:"tree",props:ke({allowClear:{type:Boolean},autoCheckParent:{type:Boolean},bordered:{type:Boolean},checkStrictly:{type:Boolean},childrenField:{},defaultExpandedKeys:{},defaultExpandedLevel:{},defaultValue:{},disabled:{type:Boolean},disabledField:{},getNodeClass:{type:Function},iconField:{},labelField:{},multiple:{type:Boolean},showIcon:{type:Boolean},transition:{type:Boolean},treeData:{},valueField:{}},Fe()),setup(e){const c=e;return(l,t)=>{var K;return((K=c.treeData)==null?void 0:K.length)>0?(I(),L(d(ul),pe(X({key:0},c)),He({_:2},[Ce(l.$slots,(r,C)=>({name:C,fn:$(v=>[_(l.$slots,C,pe(Ye(v)))])}))]),1040)):(I(),Z("div",dl,[G(d(Ze),{class:"size-10"}),Q("div",cl,ie(d(k)("common.noData")),1)]))}}});function Al(e){return q(this,null,function*(){return ae.get("/system/role/list",{params:e})})}function vl(e){return q(this,null,function*(){return ae.post("/system/role",e)})}function ml(e,c){return q(this,null,function*(){return ae.put(`/system/role/${e}`,c)})}function Sl(e){return q(this,null,function*(){return ae.delete(`/system/role/${e}`)})}function pl(){return[{component:"Input",fieldName:"name",label:k("system.role.roleName"),rules:"required"},{component:"RadioGroup",componentProps:{buttonStyle:"solid",options:[{label:k("common.enabled"),value:1},{label:k("common.disabled"),value:0}],optionType:"button"},defaultValue:1,fieldName:"status",label:k("system.role.status")},{component:"Textarea",fieldName:"remark",label:k("system.role.remark")},{component:"Input",fieldName:"permissions",formItemClass:"items-start",label:k("system.role.setPermissions"),modelPropName:"modelValue"}]}function wl(){return[{component:"Input",fieldName:"name",label:k("system.role.roleName")},{component:"Input",fieldName:"id",label:k("system.role.id")},{component:"Select",componentProps:{allowClear:!0,options:[{label:k("common.enabled"),value:1},{label:k("common.disabled"),value:0}]},fieldName:"status",label:k("system.role.status")},{component:"Input",fieldName:"remark",label:k("system.role.remark")},{component:"RangePicker",fieldName:"createTime",label:k("system.role.createTime")}]}function El(e,c){return[{field:"name",title:k("system.role.roleName"),width:200},{field:"id",title:k("system.role.id"),width:200},{cellRender:{attrs:{beforeChange:c},name:c?"CellSwitch":"CellTag"},field:"status",title:k("system.role.status"),width:100},{field:"remark",minWidth:100,title:k("system.role.remark")},{field:"createTime",title:k("system.role.createTime"),width:200},{align:"center",cellRender:{attrs:{nameField:"name",nameTitle:k("system.role.name"),onClick:e},name:"CellOperation"},field:"operation",fixed:"right",title:k("system.role.operation"),width:130}]}const yl=ee({__name:"form",emits:["success"],setup(e,{emit:c}){const l=c,t=z(),[K,r]=$e({schema:pl(),showDefaultActions:!1}),C=z([]),v=z(!1),s=z(),[F,w]=We({onConfirm(){return q(this,null,function*(){const{valid:f}=yield r.validate();if(!f)return;const b=yield r.getValues();w.lock(),(s.value?ml(s.value,b):vl(b)).then(()=>{l("success"),w.close()}).catch(()=>{w.unlock()})})},onOpenChange(f){return q(this,null,function*(){if(f){const b=w.getData();r.resetForm(),b?(t.value=b,s.value=b.id):s.value=void 0,C.value.length===0&&(yield T()),yield be(),b&&r.setValues(b)}})}});function T(){return q(this,null,function*(){v.value=!0;try{const f=yield Le();C.value=f}finally{v.value=!1}})}const D=H(()=>{var f;return(f=t.value)!=null&&f.id?k("common.edit",k("system.role.name")):k("common.create",k("system.role.name"))});function N(f){var i;const b=[];return((i=f.value)==null?void 0:i.type)==="button"&&b.push("inline-flex"),b.join(" ")}return(f,b)=>(I(),L(d(F),{title:D.value},{default:$(()=>[G(d(K),null,{permissions:$(i=>[G(d(Me),{spinning:v.value,"wrapper-class-name":"w-full"},{default:$(()=>[G(d(fl),X({"tree-data":C.value,multiple:"",bordered:"","default-expanded-level":2,"get-node-class":N},i,{"value-field":"id","label-field":"meta.title","icon-field":"meta.icon"}),{node:$(({value:g})=>[g.meta.icon?(I(),L(d(ge),{key:0,icon:g.meta.icon},null,8,["icon"])):j("",!0),xe(" "+ie(d(k)(g.meta.title)),1)]),_:1},16,["tree-data"])]),_:2},1032,["spinning"])]),_:1})]),_:1},8,["title"]))}}),gl=he(yl,[["__scopeId","data-v-71a065e3"]]),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:gl},Symbol.toStringTag,{value:"Module"}));export{gl as F,wl as a,ml as b,Sl as d,Kl as f,Al as g,El as u};
