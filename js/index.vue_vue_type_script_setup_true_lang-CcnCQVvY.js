var K=Object.defineProperty,Q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var F=(e,n,a)=>n in e?K(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,M=(e,n)=>{for(var a in n||(n={}))Y.call(n,a)&&F(e,a,n[a]);if(A)for(var a of A(n))Z.call(n,a)&&F(e,a,n[a]);return e},_=(e,n)=>Q(e,U(n));import{bl as ee,bA as te,bB as se,v as ne,$ as O}from"./bootstrap-CmOIY23B.js";import{d as T,c as $,m as P,n as h,B as k,z as R,l as v,r as J,x as E,j as w,u as i,E as D,D as H,H as ae,A as oe,L as q,M as ie,b as ce,w as le,a as re,ad as fe,ac as G,y as ue}from"../jse/index-index-Dn7Pga_E.js";const de=T({__name:"spine-text",props:{animationDuration:{default:2},animationIterationCount:{default:"infinite"}},setup(e){const n=$(()=>({animation:`shine ${e.animationDuration}s linear ${e.animationIterationCount}`}));return(a,o)=>(h(),P("div",{style:k(n.value),class:"vben-spine-text !bg-clip-text text-transparent"},[R(a.$slots,"default")],4))}}),me=T({__name:"slider-captcha-action",props:{actionStyle:{},isPassing:{type:Boolean},toLeft:{type:Boolean}},setup(e,{expose:n}){const a=e,o=v("actionRef"),c=J("0"),r=$(()=>{const{actionStyle:l}=a;return _(M({},l),{left:c.value})}),t=$(()=>Number.parseInt(c.value)>10&&!a.isPassing);return n({getEl:()=>o.value,getStyle:()=>{var l;return(l=o==null?void 0:o.value)==null?void 0:l.style},setLeft:l=>{c.value=l}}),(l,b)=>(h(),P("div",{ref_key:"actionRef",ref:o,class:E([{"transition-width !left-0 duration-300":e.toLeft,"rounded-md":t.value},"bg-background dark:bg-accent absolute left-0 top-0 flex h-full cursor-move items-center justify-center px-3.5 shadow-md"]),style:k(r.value),name:"captcha-action"},[w(i(ee),{"is-passing":e.isPassing,class:"text-foreground/60 size-4"},{default:D(()=>[R(l.$slots,"icon",{},()=>[e.isPassing?(h(),H(i(se),{key:1})):(h(),H(i(te),{key:0}))])]),_:3},8,["is-passing"])],6))}}),ge=T({__name:"slider-captcha-bar",props:{barStyle:{},toLeft:{type:Boolean}},setup(e,{expose:n}){const a=e,o=v("barRef"),c=J("0"),r=$(()=>{const{barStyle:t}=a;return _(M({},t),{width:c.value})});return n({getEl:()=>o.value,setWidth:t=>{c.value=t}}),(t,l)=>(h(),P("div",{ref_key:"barRef",ref:o,class:E([e.toLeft&&"transition-width !w-0 duration-300","bg-success absolute h-full"]),style:k(r.value)},null,6))}}),pe=T({__name:"slider-captcha-content",props:{contentStyle:{},isPassing:{type:Boolean},successText:{},text:{}},setup(e,{expose:n}){const a=e,o=v("contentRef"),c=$(()=>{const{contentStyle:r}=a;return M({},r)});return n({getEl:()=>o.value}),(r,t)=>(h(),P("div",{ref_key:"contentRef",ref:o,class:E([{[r.$style.success]:e.isPassing},"absolute top-0 flex size-full select-none items-center justify-center text-xs"]),style:k(c.value)},[R(r.$slots,"text",{},()=>[w(i(de),{class:"flex h-full items-center"},{default:D(()=>[ae(oe(e.isPassing?e.successText:e.text),1)]),_:1})])],6))}}),ye="_success_fwxn1_2",ve={success:ye},he={$style:ve},xe=ne(pe,[["__cssModules",he]]),$e=T({__name:"index",props:q({class:{},actionStyle:{default:()=>({})},barStyle:{default:()=>({})},contentStyle:{default:()=>({})},wrapperStyle:{default:()=>({})},isSlot:{type:Boolean,default:!1},successText:{default:""},text:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:q(["end","move","start","success"],["update:modelValue"]),setup(e,{expose:n,emit:a}){const o=e,c=a,r=ie(e,"modelValue"),t=ce({endTime:0,isMoving:!1,isPassing:!1,moveDistance:0,startTime:0,toLeft:!1});n({resume:L});const l=v("wrapperRef"),b=v("barRef"),W=v("contentRef"),x=v("actionRef");le(()=>t.isPassing,s=>{if(s){const{endTime:f,startTime:u}=t,d=(f-u)/1e3;c("success",{isPassing:s,time:d.toFixed(1)}),r.value=s}}),re(()=>{t.isPassing=!!r.value});function B(s){return"pageX"in s?s.pageX:"touches"in s&&s.touches[0]?s.touches[0].pageX:0}function I(s){t.isPassing||x.value&&(c("start",s),t.moveDistance=B(s)-Number.parseInt(x.value.getStyle().left.replace("px","")||"0",10),t.startTime=Date.now(),t.isMoving=!0)}function V(s){var m,g,y;const f=(g=(m=l.value)==null?void 0:m.offsetWidth)!=null?g:220,u=(y=s==null?void 0:s.offsetWidth)!=null?y:40,d=f-u-6;return{actionWidth:u,offset:d,wrapperWidth:f}}function X(s){const{isMoving:f,moveDistance:u}=t;if(f){const d=i(x),m=i(b);if(!d||!m)return;const{actionWidth:g,offset:y,wrapperWidth:S}=V(d.getEl()),p=B(s)-u;c("move",{event:s,moveDistance:u,moveX:p}),p>0&&p<=y?(d.setLeft(`${p}px`),m.setWidth(`${p+g/2}px`)):p>y&&(d.setLeft(`${S-g}px`),m.setWidth(`${S-g/2}px`),o.isSlot||z())}}function C(s){const{isMoving:f,isPassing:u,moveDistance:d}=t;if(f&&!u){c("end",s);const m=x.value,g=i(b);if(!m||!g)return;const y=B(s)-d,{actionWidth:S,offset:p,wrapperWidth:N}=V(m.getEl());y<p?o.isSlot?setTimeout(()=>{if(r.value){const j=i(W);j&&(j.getEl().style.width=`${Number.parseInt(g.getEl().style.width)}px`)}else L()},0):L():(m.setLeft(`${N-S}px`),g.setWidth(`${N-S/2}px`),z()),t.isMoving=!1}}function z(){if(o.isSlot){L();return}t.endTime=Date.now(),t.isPassing=!0,t.isMoving=!1}function L(){t.isMoving=!1,t.isPassing=!1,t.moveDistance=0,t.toLeft=!1,t.startTime=0,t.endTime=0;const s=i(x),f=i(b),u=i(W);!s||!f||!u||(u.getEl().style.width="100%",t.toLeft=!0,fe(()=>{t.toLeft=!1,s.setLeft("0"),f.setWidth("0")},300))}return(s,f)=>(h(),P("div",{ref_key:"wrapperRef",ref:l,class:E(i(ue)("border-border bg-background-deep relative flex h-10 w-full items-center overflow-hidden rounded-md border text-center",o.class)),style:k(e.wrapperStyle),onMouseleave:C,onMousemove:X,onMouseup:C,onTouchend:C,onTouchmove:X},[w(ge,{ref_key:"barRef",ref:b,"bar-style":e.barStyle,"to-left":t.toLeft},null,8,["bar-style","to-left"]),w(xe,{ref_key:"contentRef",ref:W,"content-style":e.contentStyle,"is-passing":t.isPassing,"success-text":e.successText||i(O)("ui.captcha.sliderSuccessText"),text:e.text||i(O)("ui.captcha.sliderDefaultText")},G({_:2},[s.$slots.text?{name:"text",fn:D(()=>[R(s.$slots,"text",{isPassing:t.isPassing})]),key:"0"}:void 0]),1032,["content-style","is-passing","success-text","text"]),w(me,{ref_key:"actionRef",ref:x,"action-style":e.actionStyle,"is-passing":t.isPassing,"to-left":t.toLeft,onMousedown:I,onTouchstart:I},G({_:2},[s.$slots.actionIcon?{name:"icon",fn:D(()=>[R(s.$slots,"actionIcon",{isPassing:t.isPassing})]),key:"0"}:void 0]),1032,["action-style","is-passing","to-left"])],38))}});export{$e as _};
