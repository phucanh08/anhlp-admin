var k=(g,p,a)=>new Promise((_,c)=>{var u=n=>{try{o(a.next(n))}catch(r){c(r)}},m=n=>{try{o(a.throw(n))}catch(r){c(r)}},o=n=>n.done?_(n.value):Promise.resolve(n.value).then(u,m);o((a=a.apply(g,p)).next())});import{u as q}from"./useInfiniteQuery-sruTb_LB.js";import{B}from"./bootstrap-CmOIY23B.js";import{d as C,m as t,n as s,q as f,u as e,A as P,j as I,F as x,I as F,E as j}from"../jse/index-index-Dn7Pga_E.js";const E={key:0},b={key:1},v={key:2},w={key:0},L={key:0},V={key:1},$={key:2},N=10,Q=C({__name:"infinite-queries",setup(g){const p=d=>k(null,[d],function*({pageParam:i=0}){return(yield fetch(`https://dummyjson.com/products?limit=${N}&skip=${i*N}`)).json()}),{data:a,error:_,fetchNextPage:c,hasNextPage:u,isError:m,isFetching:o,isFetchingNextPage:n,isPending:r}=q({getNextPageParam:(i,d)=>{const l=d.length+1;if(i.skip+i.limit!==i.total)return l},initialPageParam:0,queryFn:p,queryKey:["products"]});return(i,d)=>(s(),t("div",null,[e(r)?(s(),t("span",E,"加载...")):e(m)?(s(),t("span",b,"出错了: "+P(e(_)),1)):e(a)?(s(),t("div",v,[e(o)&&!e(n)?(s(),t("span",w,"Fetching...")):f("",!0),(s(!0),t(x,null,F(e(a).pages,(l,h)=>(s(),t("ul",{key:h},[(s(!0),t(x,null,F(l.products,y=>(s(),t("li",{key:y.id},P(y.title),1))),128))]))),128)),I(e(B),{disabled:!e(u)||e(n),onClick:d[0]||(d[0]=()=>e(c)())},{default:j(()=>[e(n)?(s(),t("span",L,"加载中...")):e(u)?(s(),t("span",V,"加载更多")):(s(),t("span",$,"没有更多了"))]),_:1},8,["disabled"])])):f("",!0)]))}});export{Q as _};
