var v=(h,g,s)=>new Promise((b,m)=>{var y=a=>{try{i(s.next(a))}catch(r){m(r)}},p=a=>{try{i(s.throw(a))}catch(r){m(r)}},i=a=>a.done?b(a.value):Promise.resolve(a.value).then(y,p);i((s=s.apply(h,g)).next())});import{z as F,a_ as V,$ as c,B as M,A as z,a$ as N,v as S}from"./bootstrap-CmOIY23B.js";import{u as T}from"./vxe-table-D5snAFuW.js";import{_ as j,u as q}from"./form.vue_vue_type_script_setup_true_lang-JHK5GM8m.js";import{_ as E}from"./menu-badge.vue_vue_type_script_setup_true_lang-DS94_HHk.js";import{_ as G}from"./page.vue_vue_type_script_setup_true_lang-B79NNVXE.js";import{d as I,D as d,n as u,E as l,j as f,u as t,v as _,q as A,A as $,H as L}from"../jse/index-index-Dn7Pga_E.js";import{u as O}from"./use-drawer-BWYtXBhV.js";import{P}from"./plus-DMpoty4I.js";import"./index-Dv_Q-tLx.js";import"./css-Dmgy8YJo.js";import"./useMergedState-DAlpYor9.js";import"./EyeOutlined-BULGo-Rb.js";import"./index-DqCPM53I.js";import"./colors-CDlQsefj.js";import"./index-BuhGstFT.js";import"./Trigger-B0Zd1YSB.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./index-DCVhQ827.js";import"./FormItemContext-k0P1nm20.js";import"./DialogTitle-yaBRErHk.js";import"./x-BOl5kJMD.js";import"./Separator.vue_vue_type_script_setup_true_lang-CuvZwDmJ.js";const H={class:"flex w-full items-center gap-1"},R={class:"size-5 flex-shrink-0"},J={class:"flex-auto"},K=I({__name:"list",setup(h){const[g,s]=O({connectedComponent:j,destroyOnClose:!0}),[b,m]=T({gridOptions:{columns:q(y),height:"auto",keepSource:!0,pagerConfig:{enabled:!1},proxyConfig:{ajax:{query:e=>v(null,null,function*(){return yield F()})}},rowConfig:{keyField:"id"},toolbarConfig:{custom:!0,export:!1,refresh:!0,zoom:!0},treeConfig:{parentField:"pid",rowField:"id",transform:!1}}});function y({code:e,row:o}){switch(e){case"append":{r(o);break}case"delete":{B(o);break}case"edit":{i(o);break}}}function p(){m.query()}function i(e){s.setData(e).open()}function a(){s.setData({}).open()}function r(e){s.setData({pid:e.id}).open()}function B(e){const o=z.loading({content:c("ui.actionMessage.deleting",[e.name]),duration:0,key:"action_process_msg"});N(e.id).then(()=>{z.success({content:c("ui.actionMessage.deleteSuccess",[e.name]),key:"action_process_msg"}),p()}).catch(()=>{o()})}return(e,o)=>(u(),d(t(G),{"auto-content-height":""},{default:l(()=>[f(t(g),{onSuccess:p}),f(t(b),null,{"toolbar-tools":l(()=>[f(t(M),{type:"primary",onClick:a},{default:l(()=>[f(t(P),{class:"size-5"}),L(" "+$(t(c)("ui.actionTitle.create",[t(c)("system.menu.name")])),1)]),_:1})]),title:l(({row:n})=>{var k,C,x,D;return[_("div",H,[_("div",R,[n.type==="button"?(u(),d(t(V),{key:0,icon:"carbon:security",class:"size-full"})):(k=n.meta)!=null&&k.icon?(u(),d(t(V),{key:1,icon:((C=n.meta)==null?void 0:C.icon)||"carbon:circle-dash",class:"size-full"},null,8,["icon"])):A("",!0)]),_("span",J,$(t(c)((x=n.meta)==null?void 0:x.title)),1),o[0]||(o[0]=_("div",{class:"items-center justify-end"},null,-1))]),(D=n.meta)!=null&&D.badgeType?(u(),d(t(E),{key:0,class:"menu-badge",badge:n.meta.badge,"badge-type":n.meta.badgeType,"badge-variants":n.meta.badgeVariants},null,8,["badge","badge-type","badge-variants"])):A("",!0)]}),_:1})]),_:1}))}}),ge=S(K,[["__scopeId","data-v-6d06d03a"]]);export{ge as default};
