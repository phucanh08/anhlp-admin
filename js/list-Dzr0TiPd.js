var T=Object.defineProperty;var k=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var F=(t,e,o)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,S=(t,e)=>{for(var o in e||(e={}))O.call(e,o)&&F(t,o,e[o]);if(k)for(var o of k(e))V.call(e,o)&&F(t,o,e[o]);return t};var y=(t,e,o)=>new Promise((d,p)=>{var g=i=>{try{c(o.next(i))}catch(u){p(u)}},h=i=>{try{c(o.throw(i))}catch(u){p(u)}},c=i=>i.done?d(i.value):Promise.resolve(i.value).then(g,h);c((o=o.apply(t,e)).next())});import{b7 as n,b8 as $,b9 as l,ba as z,bb as B,bc as E,bd as P,be as x,bf as R,$ as m,B as G,A as D}from"./bootstrap-CmOIY23B.js";import{u as j}from"./vxe-table-D5snAFuW.js";import{F as q,u as L,a as N,g as W,b as H,d as I}from"./form-qmydl9_m.js";import{P as v}from"./plus-DMpoty4I.js";import{_ as J}from"./page.vue_vue_type_script_setup_true_lang-B79NNVXE.js";import{d as K,D as Q,n as U,E as _,j as f,u as s,H as X,A as Y}from"../jse/index-index-Dn7Pga_E.js";import{u as Z}from"./use-drawer-BWYtXBhV.js";import"./index-Dv_Q-tLx.js";import"./css-Dmgy8YJo.js";import"./useMergedState-DAlpYor9.js";import"./EyeOutlined-BULGo-Rb.js";import"./index-DqCPM53I.js";import"./colors-CDlQsefj.js";import"./index-BuhGstFT.js";import"./Trigger-B0Zd1YSB.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./index-DCVhQ827.js";import"./FormItemContext-k0P1nm20.js";import"./index-DsnPyS7F.js";import"./arrays-BGMUzFOO.js";import"./DialogTitle-yaBRErHk.js";import"./x-BOl5kJMD.js";import"./Separator.vue_vue_type_script_setup_true_lang-CuvZwDmJ.js";function A(t){return l(R(t))}n.useModal=$;n.info=function(e){return l(z(e))};n.success=function(e){return l(B(e))};n.error=function(e){return l(E(e))};n.warning=A;n.warn=A;n.confirm=function(e){return l(P(e))};n.destroyAll=function(){for(;x.length;){const e=x.pop();e&&e()}};n.install=function(t){return t.component(n.name,n),t};const Se=K({__name:"list",setup(t){const[e,o]=Z({connectedComponent:q,destroyOnClose:!0}),[d,p]=j({formOptions:{fieldMappingTime:[["createTime",["startTime","endTime"]]],schema:N(),submitOnChange:!0},gridOptions:{columns:L(g,c),height:"auto",keepSource:!0,proxyConfig:{ajax:{query:(b,C)=>y(null,[b,C],function*({page:r},a){return yield W(S({page:r.currentPage,pageSize:r.pageSize},a))})}},rowConfig:{keyField:"id"},toolbarConfig:{custom:!0,export:!1,refresh:!0,search:!0,zoom:!0}}});function g(r){switch(r.code){case"delete":{u(r.row);break}case"edit":{i(r.row);break}}}function h(r,a){return new Promise((b,C)=>{n.confirm({content:r,onCancel(){C(new Error("已取消"))},onOk(){b(!0)},title:a})})}function c(r,a){return y(this,null,function*(){const b={0:"禁用",1:"启用"};try{return yield h(`你要将${a.name}的状态切换为 【${b[r.toString()]}】 吗？`,"切换状态"),yield H(a.id,{status:r}),!0}catch(C){return!1}})}function i(r){o.setData(r).open()}function u(r){const a=D.loading({content:m("ui.actionMessage.deleting",[r.name]),duration:0,key:"action_process_msg"});I(r.id).then(()=>{D.success({content:m("ui.actionMessage.deleteSuccess",[r.name]),key:"action_process_msg"}),w()}).catch(()=>{a()})}function w(){p.query()}function M(){o.setData({}).open()}return(r,a)=>(U(),Q(s(J),{"auto-content-height":""},{default:_(()=>[f(s(e),{onSuccess:w}),f(s(d),{"table-title":s(m)("system.role.list")},{"toolbar-tools":_(()=>[f(s(G),{type:"primary",onClick:M},{default:_(()=>[f(s(v),{class:"size-5"}),X(" "+Y(s(m)("ui.actionTitle.create",[s(m)("system.role.name")])),1)]),_:1})]),_:1},8,["table-title"])]),_:1}))}});export{Se as default};
