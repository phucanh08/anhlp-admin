var p=(i,n,s)=>new Promise((m,a)=>{var r=e=>{try{c(s.next(e))}catch(o){a(o)}},t=e=>{try{c(s.throw(e))}catch(o){a(o)}},c=e=>e.done?m(e.value):Promise.resolve(e.value).then(r,t);c((s=s.apply(i,n)).next())});import{aY as _,c4 as h}from"./bootstrap-8xWW0-wo.js";import{a1 as d,P,E as f,ap as g,aj as w,p as u,a9 as l,ak as b,ax as S,L as x,ai as V}from"../jse/index-index-C2P5BEtU.js";import{u as k,s as v}from"./use-vben-form-6Ea_Wscj.js";const y=d({__name:"password-setting",props:{formSchema:{default:()=>[]}},emits:["submit"],setup(i,{expose:n,emit:s}){const m=i,a=s,[r,t]=k(P({commonConfig:{componentProps:{class:"w-full"}},layout:"horizontal",schema:f(()=>m.formSchema),showDefaultActions:!1}));function c(){return p(this,null,function*(){const{valid:e}=yield t.validate(),o=yield t.getValues();e&&a("submit",o)})}return n({getFormApi:()=>t}),(e,o)=>(w(),g("div",null,[u(l(r)),u(l(_),{type:"submit",class:"mt-4",onClick:c},{default:b(()=>[...o[0]||(o[0]=[S(" 更新密码 ",-1)])]),_:1})]))}}),B=d({__name:"password-setting",setup(i){const n=x(),s=f(()=>[{fieldName:"oldPassword",label:"旧密码",component:"VbenInputPassword",componentProps:{placeholder:"请输入旧密码"}},{fieldName:"newPassword",label:"新密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请输入新密码"}},{fieldName:"confirmPassword",label:"确认密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请再次输入新密码"},dependencies:{rules(a){const{newPassword:r}=a;return v({required_error:"请再次输入新密码"}).min(1,{message:"请再次输入新密码"}).refine(t=>t===r,{message:"两次输入的密码不一致"})},triggerFields:["newPassword"]}}]);function m(){h.success("密码修改成功")}return(a,r)=>(w(),V(l(y),{ref_key:"profilePasswordSettingRef",ref:n,class:"w-1/3","form-schema":s.value,onSubmit:m},null,8,["form-schema"]))}});export{B as _};
