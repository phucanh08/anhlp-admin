var p=(i,r,s)=>new Promise((c,t)=>{var n=e=>{try{m(s.next(e))}catch(o){t(o)}},a=e=>{try{m(s.throw(e))}catch(o){t(o)}},m=e=>e.done?c(e.value):Promise.resolve(e.value).then(n,a);m((s=s.apply(i,r)).next())});import{X as _,U as h,a7 as b,A as g}from"./bootstrap-CmOIY23B.js";import{d,b as P,c as f,m as S,n as w,j as u,u as l,E as V,H as v,r as x,D as k}from"../jse/index-index-Dn7Pga_E.js";const y=d({__name:"password-setting",props:{formSchema:{default:()=>[]}},emits:["submit"],setup(i,{expose:r,emit:s}){const c=i,t=s,[n,a]=_(P({commonConfig:{componentProps:{class:"w-full"}},layout:"horizontal",schema:f(()=>c.formSchema),showDefaultActions:!1}));function m(){return p(this,null,function*(){const{valid:e}=yield a.validate(),o=yield a.getValues();e&&t("submit",o)})}return r({getFormApi:()=>a}),(e,o)=>(w(),S("div",null,[u(l(n)),u(l(h),{type:"submit",class:"mt-4",onClick:m},{default:V(()=>[...o[0]||(o[0]=[v(" 更新密码 ",-1)])]),_:1})]))}}),F=d({__name:"password-setting",setup(i){const r=x(),s=f(()=>[{fieldName:"oldPassword",label:"旧密码",component:"VbenInputPassword",componentProps:{placeholder:"请输入旧密码"}},{fieldName:"newPassword",label:"新密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请输入新密码"}},{fieldName:"confirmPassword",label:"确认密码",component:"VbenInputPassword",componentProps:{passwordStrength:!0,placeholder:"请再次输入新密码"},dependencies:{rules(t){const{newPassword:n}=t;return b({required_error:"请再次输入新密码"}).min(1,{message:"请再次输入新密码"}).refine(a=>a===n,{message:"两次输入的密码不一致"})},triggerFields:["newPassword"]}}]);function c(){g.success("密码修改成功")}return(t,n)=>(w(),k(l(y),{ref_key:"profilePasswordSettingRef",ref:r,class:"w-1/3","form-schema":s.value,onSubmit:c},null,8,["form-schema"]))}});export{F as _};
