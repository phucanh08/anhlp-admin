import{$ as l,aI as P,bo as q,U as J,A as K}from"./bootstrap-CmOIY23B.js";import{C as Q}from"./index-18-lVBa-.js";import C from"./index-BJGWNYOq.js";import $ from"./index-DehqAyGo.js";import{b as R,d as X,c as H,D as _,n as d,u as e,B as A,E as s,j as n,z as I,m as w,v as c,H as x,A as p,a2 as E,I as F,F as z,q as S,r as W}from"../jse/index-index-Dn7Pga_E.js";import{_ as Z}from"./Card.vue_vue_type_script_setup_true_lang-CgcjBT0i.js";import{a as ee,_ as te,b as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang--A7c1DMi.js";import{_ as ie}from"./CardFooter.vue_vue_type_script_setup_true_lang-Cl83QLPy.js";import{R as le}from"./rotate-cw-CF1nnIEv.js";import{_ as oe}from"./page.vue_vue_type_script_setup_true_lang-B79NNVXE.js";import B from"./index-DCVhQ827.js";import"./index-Cq5upoUv.js";import"./shallowequal-BOWVaEXw.js";import"./Trigger-B0Zd1YSB.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./collapse-BuqCI_Sc.js";import"./Overflow-D-n6m9kG.js";import"./index-bMV-OEX7.js";import"./index-BuhGstFT.js";import"./colors-CDlQsefj.js";import"./collapseMotion-CW4DPm-L.js";import"./slide-DCDZKjHj.js";import"./useRefs-DsN55d7I.js";import"./hasIn-1TLaJpEW.js";import"./isMobile-8sZ0LT6r.js";import"./useMergedState-DAlpYor9.js";import"./isPlainObject-Cfyj4D1A.js";import"./FormItemContext-k0P1nm20.js";import"./statusUtils-DTPv3Ou6.js";import"./BaseInput-C43ESQW7.js";import"./css-Dmgy8YJo.js";import"./index-CWW4frSs.js";import"./SearchOutlined-C8HQRqNf.js";import"./EyeOutlined-BULGo-Rb.js";import"./DownOutlined-CvF4JFGC.js";function ne(){const o=R([]);function h(f){o.push(f)}function t(){o.splice(0)}return{addPoint:h,clearPoints:t,points:o}}const se={key:1},re={class:"flex items-center justify-end"},ce=["alt","src"],de={class:"absolute inset-0"},pe=X({__name:"point-selection-captcha-card",props:{captchaImage:{},height:{default:"220px"},paddingX:{default:"12px"},paddingY:{default:"16px"},title:{default:""},width:{default:"300px"}},emits:["click"],setup(o,{emit:h}){const t=o,f=h,m=a=>{if(typeof a=="number")return a;const v=Number.parseFloat(a);return Number.isNaN(v)?0:v},y=H(()=>({padding:`${m(t.paddingY)}px ${m(t.paddingX)}px`,width:`${m(t.width)+m(t.paddingX)*2}px`})),u=H(()=>({height:`${m(t.height)}px`,width:`${m(t.width)}px`}));function i(a){f("click",a)}return(a,v)=>(d(),_(e(Z),{style:A(y.value),"aria-labelledby":"captcha-title",role:"region"},{default:s(()=>[n(e(te),{class:"p-0"},{default:s(()=>[n(e(ee),{id:"captcha-title",class:"flex items-center justify-between"},{default:s(()=>[a.$slots.title?I(a.$slots,"title",{key:0},()=>[x(p(e(l)("ui.captcha.title")),1)]):(d(),w("span",se,p(o.title),1)),c("div",re,[I(a.$slots,"extra")])]),_:3})]),_:3}),n(e(ae),{class:"relative mt-2 flex w-full overflow-hidden rounded p-0"},{default:s(()=>[E(c("img",{alt:e(l)("ui.captcha.alt"),src:o.captchaImage,style:A(u.value),class:"relative z-10",onClick:i},null,12,ce),[[P,o.captchaImage]]),c("div",de,[I(a.$slots,"default")])]),_:3}),n(e(ie),{class:"mt-2 flex justify-between p-0"},{default:s(()=>[I(a.$slots,"footer")]),_:3})]),_:3},8,["style"]))}}),he=["aria-label"],me=["alt","src"],ue={key:1,class:"border-border flex-center h-10 w-full rounded border"},D=11,fe=X({__name:"index",props:{showConfirm:{type:Boolean,default:!1},hintImage:{default:""},hintText:{default:""},captchaImage:{},height:{default:"220px"},paddingX:{default:"12px"},paddingY:{default:"16px"},title:{default:""},width:{default:"300px"}},emits:["click","confirm","refresh"],setup(o,{emit:h}){const t=o,f=h,{addPoint:m,clearPoints:y,points:u}=ne();!t.hintImage&&!t.hintText&&console.warn("At least one of hint image or hint text must be provided");function i(r){const g=r.getBoundingClientRect();return{x:g.left+window.scrollX,y:g.top+window.scrollY}}function a(r){try{const g=r.currentTarget;if(!g)throw new Error("Element not found");const{x:k,y:b}=i(g),Y=r.clientX+window.scrollX,N=r.clientY+window.scrollY;if(typeof Y!="number"||typeof N!="number")throw new TypeError("Mouse coordinates not found");const U=Y-k,T=N-b,V=g.getBoundingClientRect();if(U<0||T<0||U>V.width||T>V.height){console.warn("Click position is out of the valid range");return}const O=Math.ceil(U),G=Math.ceil(T),j={i:u.length,t:Date.now(),x:O,y:G};m(j),f("click",j),r.stopPropagation(),r.preventDefault()}catch(g){console.error("Error in handleClick:",g)}}function v(){try{y()}catch(r){console.error("Error in clear:",r)}}function L(){try{v(),f("refresh")}catch(r){console.error("Error in handleRefresh:",r)}}function M(){if(t.showConfirm)try{f("confirm",u,v)}catch(r){console.error("Error in handleConfirm:",r)}}return(r,g)=>(d(),_(pe,{"captcha-image":o.captchaImage,height:o.height,"padding-x":o.paddingX,"padding-y":o.paddingY,title:o.title,width:o.width,onClick:a},{title:s(()=>[I(r.$slots,"title",{},()=>[x(p(e(l)("ui.captcha.title")),1)])]),extra:s(()=>[n(e(q),{"aria-label":e(l)("ui.captcha.refreshAriaLabel"),class:"ml-1",onClick:L},{default:s(()=>[n(e(le),{class:"size-5"})]),_:1},8,["aria-label"]),o.showConfirm?(d(),_(e(J),{key:0,"aria-label":e(l)("ui.captcha.confirmAriaLabel"),class:"ml-2",size:"sm",onClick:M},{default:s(()=>[x(p(e(l)("ui.captcha.confirm")),1)]),_:1},8,["aria-label"])):S("",!0)]),footer:s(()=>[o.hintImage?(d(),w("img",{key:0,alt:e(l)("ui.captcha.alt"),src:o.hintImage,class:"border-border h-10 w-full rounded border"},null,8,me)):o.hintText?(d(),w("div",ue,p(`${e(l)("ui.captcha.clickInOrder")}【${o.hintText}】`),1)):S("",!0)]),default:s(()=>[(d(!0),w(z,null,F(e(u),(k,b)=>(d(),w("div",{key:b,"aria-label":e(l)("ui.captcha.pointAriaLabel")+(b+1),style:A({top:`${k.y-D}px`,left:`${k.x-D}px`}),class:"bg-primary text-primary-50 border-primary-50 absolute z-20 flex h-5 w-5 cursor-default items-center justify-center rounded-full border-2",role:"button",tabindex:"0"},p(b+1),13,he))),128))]),_:3},8,["captcha-image","height","padding-x","padding-y","title","width"]))}}),ge={class:"mb-3 flex items-center justify-start"},xe={class:"ml-8 flex w-96 items-center"},we={class:"mb-3 flex items-center justify-start"},ve={class:"ml-8"},ye={class:"ml-8"},be={class:"ml-8"},Ie={class:"float-left p-5"},ke={class:"mr-3 w-16"},Ce={class:"mr-3 w-52"},$e={class:"mr-3 w-16"},_e={class:"mr-3 w-16"},Ue="https://unpkg.com/@vbenjs/static-source@0.1.7/source/default-captcha-image.jpeg",Te="https://unpkg.com/@vbenjs/static-source@0.1.7/source/default-hint-image.png",dt=X({__name:"point-selection-captcha",setup(o){const h=W([]),t=R({captchaImage:"",captchaImageUrl:Ue,height:void 0,hintImage:"",hintImageUrl:Te,hintText:"唇，燕，碴，找",paddingX:void 0,paddingY:void 0,showConfirm:!0,showHintImage:!1,title:"",width:void 0}),f=(u,i)=>{K.success({content:`captcha points: ${JSON.stringify(u)}`}),i(),h.value=[]},m=()=>{h.value=[]},y=u=>{h.value.push(u)};return(u,i)=>(d(),_(e(oe),{description:e(l)("examples.captcha.pageDescription"),title:e(l)("examples.captcha.pageTitle")},{default:s(()=>[n(e(Q),{title:e(l)("examples.captcha.basic"),class:"mb-4 overflow-x-auto"},{default:s(()=>[c("div",ge,[n(e(C),{value:t.title,"onUpdate:value":i[0]||(i[0]=a=>t.title=a),placeholder:e(l)("examples.captcha.titlePlaceholder"),class:"w-64"},null,8,["value","placeholder"]),n(e(C),{value:t.captchaImageUrl,"onUpdate:value":i[1]||(i[1]=a=>t.captchaImageUrl=a),placeholder:e(l)("examples.captcha.captchaImageUrlPlaceholder"),class:"ml-8 w-64"},null,8,["value","placeholder"]),c("div",xe,[n(e(B),{modelValue:t.showHintImage,"onUpdate:modelValue":i[2]||(i[2]=a=>t.showHintImage=a),"checked-children":e(l)("examples.captcha.hintImage"),"un-checked-children":e(l)("examples.captcha.hintText"),class:"mr-4 w-40"},null,8,["modelValue","checked-children","un-checked-children"]),E(n(e(C),{value:t.hintImageUrl,"onUpdate:value":i[3]||(i[3]=a=>t.hintImageUrl=a),placeholder:e(l)("examples.captcha.hintImagePlaceholder")},null,8,["value","placeholder"]),[[P,t.showHintImage]]),E(n(e(C),{value:t.hintText,"onUpdate:value":i[4]||(i[4]=a=>t.hintText=a),placeholder:e(l)("examples.captcha.hintTextPlaceholder")},null,8,["value","placeholder"]),[[P,!t.showHintImage]])]),n(e(B),{modelValue:t.showConfirm,"onUpdate:modelValue":i[5]||(i[5]=a=>t.showConfirm=a),"checked-children":e(l)("examples.captcha.showConfirm"),"un-checked-children":e(l)("examples.captcha.hideConfirm"),class:"ml-8 w-28"},null,8,["modelValue","checked-children","un-checked-children"])]),c("div",we,[c("div",null,[n(e($),{value:t.width,"onUpdate:value":i[6]||(i[6]=a=>t.width=a),min:1,placeholder:e(l)("examples.captcha.widthPlaceholder"),precision:0,step:1,class:"w-64"},{addonAfter:s(()=>[...i[10]||(i[10]=[x("px",-1)])]),_:1},8,["value","placeholder"])]),c("div",ve,[n(e($),{value:t.height,"onUpdate:value":i[7]||(i[7]=a=>t.height=a),min:1,placeholder:e(l)("examples.captcha.heightPlaceholder"),precision:0,step:1,class:"w-64"},{addonAfter:s(()=>[...i[11]||(i[11]=[x("px",-1)])]),_:1},8,["value","placeholder"])]),c("div",ye,[n(e($),{value:t.paddingX,"onUpdate:value":i[8]||(i[8]=a=>t.paddingX=a),min:1,placeholder:e(l)("examples.captcha.paddingXPlaceholder"),precision:0,step:1,class:"w-64"},{addonAfter:s(()=>[...i[12]||(i[12]=[x("px",-1)])]),_:1},8,["value","placeholder"])]),c("div",be,[n(e($),{value:t.paddingY,"onUpdate:value":i[9]||(i[9]=a=>t.paddingY=a),min:1,placeholder:e(l)("examples.captcha.paddingYPlaceholder"),precision:0,step:1,class:"w-64"},{addonAfter:s(()=>[...i[13]||(i[13]=[x("px",-1)])]),_:1},8,["value","placeholder"])])]),n(e(fe),{"captcha-image":t.captchaImageUrl||t.captchaImage,height:t.height||220,"hint-image":t.showHintImage?t.hintImageUrl||t.hintImage:"","hint-text":t.hintText,"padding-x":t.paddingX,"padding-y":t.paddingY,"show-confirm":t.showConfirm,width:t.width||300,class:"float-left",onClick:y,onConfirm:f,onRefresh:m},{title:s(()=>[x(p(t.title||e(l)("examples.captcha.captchaCardTitle")),1)]),_:1},8,["captcha-image","height","hint-image","hint-text","padding-x","padding-y","show-confirm","width"]),c("ol",Ie,[(d(!0),w(z,null,F(h.value,a=>(d(),w("li",{key:a.i,class:"flex"},[c("span",ke,p(e(l)("examples.captcha.index")+a.i),1),c("span",Ce,p(e(l)("examples.captcha.timestamp")+a.t),1),c("span",$e,p(e(l)("examples.captcha.x")+a.x),1),c("span",_e,p(e(l)("examples.captcha.y")+a.y),1)]))),128))])]),_:1},8,["title"])]),_:1},8,["description","title"]))}});export{dt as default};
