var i=(m,t,r)=>new Promise((o,a)=>{var s=e=>{try{n(r.next(e))}catch(c){a(c)}},u=e=>{try{n(r.throw(e))}catch(c){a(c)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,u);n((r=r.apply(m,t)).next())});import{u as d}from"./useQuery-MkQhxMhz.js";import{B as _}from"./bootstrap-CmOIY23B.js";import{d as g,r as v,m as p,n as y,j as w,q as h,v as q,E as B,H as k,u as l,A as f,F as x}from"../jse/index-index-Dn7Pga_E.js";const C={key:0,class:"my-3"},A=g({__name:"query-retries",setup(m){const t=v(-1);function r(){return i(this,null,function*(){return t.value+=1,new Promise((n,e)=>{setTimeout(()=>{e(new Error("something went wrong!"))},1e3)})})}const{error:o,isFetching:a,refetch:s}=d({enabled:!1,queryFn:r,queryKey:["queryKey"],retry:3}),u=()=>i(null,null,function*(){t.value=-1,yield s()});return(n,e)=>(y(),p(x,null,[w(l(_),{loading:l(a),onClick:u},{default:B(()=>[...e[0]||(e[0]=[k(" 发起错误重试 ",-1)])]),_:1},8,["loading"]),t.value>0?(y(),p("p",C,"重试次数"+f(t.value),1)):h("",!0),q("p",null,f(l(o)),1)],64))}});export{A as _};
