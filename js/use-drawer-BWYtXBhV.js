var Le=Object.defineProperty,Ne=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var q=(s,t,o)=>t in s?Le(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,p=(s,t)=>{for(var o in t||(t={}))ne.call(t,o)&&q(s,o,t[o]);if(H)for(var o of H(t))le.call(t,o)&&q(s,o,t[o]);return s},k=(s,t)=>Ne(s,je(t));var z=(s,t)=>{var o={};for(var a in s)ne.call(s,a)&&t.indexOf(a)<0&&(o[a]=s[a]);if(s!=null&&H)for(var a of H(s))t.indexOf(a)<0&&le.call(s,a)&&(o[a]=s[a]);return o};var R=(s,t,o)=>q(s,typeof t!="symbol"?t+"":t,o);var K=(s,t,o)=>new Promise((a,i)=>{var l=y=>{try{w(o.next(y))}catch(d){i(d)}},C=y=>{try{w(o.throw(y))}catch(d){i(d)}},w=y=>y.done?a(y.value):Promise.resolve(y.value).then(l,C);w((o=o.apply(s,t)).next())});import{d as _,D as c,n as r,u as e,R as he,S as ye,E as f,z as h,i as be,m as Z,c as E,r as V,az as We,j as B,q as v,B as He,G as ee,y as O,x as T,aA as Ke,aB as Ue,w as Je,v as G,H as F,A as M,Q as re,p as we,aC as Ye,au as qe,b as Ge,a1 as ie,C as Ce}from"../jse/index-index-Dn7Pga_E.js";import{bM as Qe,aY as ve,c6 as Xe,aH as Ze,c7 as et,c8 as tt,c9 as ot,ca as st,cb as at,bo as de,cc as nt,cd as ce,bj as lt,U as ue,ce as rt,cf as it}from"./bootstrap-CmOIY23B.js";import{D as dt,a as ct,b as ut,c as pt,d as ft}from"./DialogTitle-yaBRErHk.js";import{X as pe}from"./x-BOl5kJMD.js";import{_ as mt}from"./Separator.vue_vue_type_script_setup_true_lang-CuvZwDmJ.js";const ht=Qe("bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 border-border",{defaultVariants:{side:"right"},variants:{side:{bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left ",right:"inset-y-0 right-0 w-3/4 border-l  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top"}}}),yt=_({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:t}){const i=ve(s,t);return(l,C)=>(r(),c(e(dt),he(ye(e(i))),{default:f(()=>[h(l.$slots,"default")]),_:3},16))}}),fe=_({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(s){const t=s;return(o,a)=>(r(),c(e(ct),he(ye(t)),{default:f(()=>[h(o.$slots,"default")]),_:3},16))}}),bt=["data-dismissable-drawer"],wt=_({__name:"SheetOverlay",setup(s){Xe();const t=be("DISMISSABLE_DRAWER_ID");return(o,a)=>(r(),Z("div",{"data-dismissable-drawer":e(t),class:"z-popup inset-0 bg-overlay"},null,8,bt))}}),Ct=_({inheritAttrs:!1,__name:"SheetContent",props:{appendTo:{default:"body"},class:{},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},side:{},zIndex:{},forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(s,{emit:t}){const o=s,a=t,i=E(()=>{const $=o,{class:b,modal:u,open:m,side:D}=$;return z($,["class","modal","open","side"])});function l(){return o.appendTo==="body"||o.appendTo===document.body||!o.appendTo}const C=E(()=>l()?"fixed":"absolute"),w=ve(i,a),y=V(null);function d(b){var u;b.target===((u=y.value)==null?void 0:u.$el)&&(o.open?a("opened"):a("closed"))}return(b,u)=>(r(),c(We,{defer:"",to:s.appendTo},[B(Ze,{name:"fade"},{default:f(()=>[s.open&&s.modal?(r(),c(wt,{key:0,style:He(k(p({},s.zIndex?{zIndex:s.zIndex}:{}),{position:C.value,backdropFilter:s.overlayBlur&&s.overlayBlur>0?`blur(${s.overlayBlur}px)`:"none"}))},null,8,["style"])):v("",!0)]),_:1}),B(e(ut),ee({ref_key:"contentRef",ref:y,class:e(O)("z-popup",e(ht)({side:s.side}),o.class),style:k(p({},s.zIndex?{zIndex:s.zIndex}:{}),{position:C.value}),onAnimationend:d},p(p({},e(w)),b.$attrs)),{default:f(()=>[h(b.$slots,"default")]),_:3},16,["class","style"])],8,["to"]))}}),Q=_({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,o=E(()=>{const l=t,{class:a}=l;return z(l,["class"])});return(a,i)=>(r(),c(e(pt),ee({class:e(O)("text-sm text-muted-foreground",t.class)},o.value),{default:f(()=>[h(a.$slots,"default")]),_:3},16,["class"]))}}),vt=_({__name:"SheetFooter",props:{class:{}},setup(s){const t=s;return(o,a)=>(r(),Z("div",{class:T(e(O)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[h(o.$slots,"default")],2))}}),gt=_({__name:"SheetHeader",props:{class:{}},setup(s){const t=s;return(o,a)=>(r(),Z("div",{class:T(e(O)("flex flex-col text-center sm:text-left",t.class))},[h(o.$slots,"default")],2))}}),X=_({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,o=E(()=>{const l=t,{class:a}=l;return z(l,["class"])});return(a,i)=>(r(),c(e(ft),ee({class:e(O)("font-medium text-foreground",t.class)},o.value),{default:f(()=>[h(a.$slots,"default")]),_:3},16,["class"]))}}),_t={class:"flex items-center"},Dt={class:"flex-center"},xt=_({__name:"drawer",props:{drawerApi:{default:void 0},appendToMain:{type:Boolean,default:!1},cancelText:{},class:{},closable:{type:Boolean},closeIconPlacement:{default:"right"},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},destroyOnClose:{type:Boolean,default:!1},footer:{type:Boolean},footerClass:{},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},placement:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean,default:!1},title:{},titleTooltip:{},zIndex:{default:1e3}},setup(s){var j,ae;const t=s,o=et.getComponents(),a=Ke();we("DISMISSABLE_DRAWER_ID",a);const i=V(),{$t:l}=tt(),{isMobile:C}=ot(),w=(ae=(j=t.drawerApi)==null?void 0:j.useStore)==null?void 0:ae.call(j),{appendToMain:y,cancelText:d,class:b,closable:u,closeIconPlacement:m,closeOnClickModal:D,closeOnPressEscape:A,confirmLoading:$,confirmText:U,contentClass:ge,description:L,destroyOnClose:_e,footer:De,footerClass:xe,header:Be,headerClass:Oe,loading:te,modal:Ae,openAutoFocus:Se,overlayBlur:$e,placement:I,showCancelButton:ke,showConfirmButton:Te,submitting:x,title:N,titleTooltip:oe,zIndex:Ee}=st(t,w);Ue(()=>{var n;y.value||(n=t.drawerApi)==null||n.close()});function Ie(n){(!D.value||x.value)&&n.preventDefault()}function Pe(n){(!A.value||x.value)&&n.preventDefault()}function ze(n){const g=n.target,W=g==null?void 0:g.dataset.dismissableDrawer;(x.value||!D.value||W!==a)&&n.preventDefault()}function Re(n){Se.value||n==null||n.preventDefault()}function se(n){n.preventDefault(),n.stopPropagation()}const Fe=E(()=>y.value?`#${at}>div:not(.absolute)>div`:void 0),J=V(!1),Y=V(!0);Je(()=>{var n;return(n=w==null?void 0:w.value)==null?void 0:n.isOpen},n=>{Y.value=!1,n&&!e(J)&&(J.value=!0)});function Me(){var n;Y.value=!0,(n=t.drawerApi)==null||n.onClosed()}const Ve=E(()=>!e(_e)&&e(J));return(n,g)=>{var W;return r(),c(e(yt),{modal:!1,open:(W=e(w))==null?void 0:W.isOpen,"onUpdate:open":g[3]||(g[3]=()=>{var P;return(P=s.drawerApi)==null?void 0:P.close()})},{default:f(()=>{var P;return[B(e(Ct),{"append-to":Fe.value,class:T(e(O)("flex w-[520px] flex-col",e(b),{"!w-full":e(C)||e(I)==="bottom"||e(I)==="top","max-h-[100vh]":e(I)==="bottom"||e(I)==="top",hidden:Y.value})),modal:e(Ae),open:(P=e(w))==null?void 0:P.isOpen,side:e(I),"z-index":e(Ee),"force-mount":Ve.value,"overlay-blur":e($e),onCloseAutoFocus:se,onClosed:Me,onEscapeKeyDown:Pe,onFocusOutside:se,onInteractOutside:Ie,onOpenAutoFocus:Re,onOpened:g[2]||(g[2]=()=>{var S;return(S=s.drawerApi)==null?void 0:S.onOpened()}),onPointerDownOutside:ze},{default:f(()=>[e(Be)?(r(),c(e(gt),{key:0,class:T(e(O)("!flex flex-row items-center justify-between border-b px-6 py-5",e(Oe),{"px-4 py-3":e(u),"pl-2":e(u)&&e(m)==="left"}))},{default:f(()=>[G("div",_t,[e(u)&&e(m)==="left"?(r(),c(e(fe),{key:0,"as-child":"",disabled:e(x),class:"ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-secondary"},{default:f(()=>[h(n.$slots,"close-icon",{},()=>[B(e(de),null,{default:f(()=>[B(e(pe),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):v("",!0),e(u)&&e(m)==="left"?(r(),c(e(mt),{key:1,class:"ml-1 mr-2 h-8",decorative:"",orientation:"vertical"})):v("",!0),e(N)?(r(),c(e(X),{key:2,class:"text-left"},{default:f(()=>[h(n.$slots,"title",{},()=>[F(M(e(N))+" ",1),e(oe)?(r(),c(e(nt),{key:0,"trigger-class":"pb-1"},{default:f(()=>[F(M(e(oe)),1)]),_:1})):v("",!0)])]),_:3})):v("",!0),e(L)?(r(),c(e(Q),{key:3,class:"mt-1 text-xs"},{default:f(()=>[h(n.$slots,"description",{},()=>[F(M(e(L)),1)])]),_:3})):v("",!0)]),!e(N)||!e(L)?(r(),c(e(ce),{key:0},{default:f(()=>[e(N)?v("",!0):(r(),c(e(X),{key:0})),e(L)?v("",!0):(r(),c(e(Q),{key:1}))]),_:1})):v("",!0),G("div",Dt,[h(n.$slots,"extra"),e(u)&&e(m)==="right"?(r(),c(e(fe),{key:0,"as-child":"",disabled:e(x),class:"ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-secondary"},{default:f(()=>[h(n.$slots,"close-icon",{},()=>[B(e(de),null,{default:f(()=>[B(e(pe),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):v("",!0)])]),_:3},8,["class"])):(r(),c(e(ce),{key:1},{default:f(()=>[B(e(X)),B(e(Q))]),_:1})),G("div",{ref_key:"wrapperRef",ref:i,class:T(e(O)("relative flex-1 overflow-y-auto p-3",e(ge),{"pointer-events-none":e(te)||e(x)}))},[h(n.$slots,"default")],2),e(te)||e(x)?(r(),c(e(lt),{key:2,spinning:""})):v("",!0),e(De)?(r(),c(e(vt),{key:3,class:T(e(O)("w-full flex-row items-center justify-end border-t p-2 px-3",e(xe)))},{default:f(()=>[h(n.$slots,"prepend-footer"),h(n.$slots,"footer",{},()=>[e(ke)?(r(),c(re(e(o).DefaultButton||e(ue)),{key:0,variant:"ghost",disabled:e(x),onClick:g[0]||(g[0]=()=>{var S;return(S=s.drawerApi)==null?void 0:S.onCancel()})},{default:f(()=>[h(n.$slots,"cancelText",{},()=>[F(M(e(d)||e(l)("cancel")),1)])]),_:3},8,["disabled"])):v("",!0),h(n.$slots,"center-footer"),e(Te)?(r(),c(re(e(o).PrimaryButton||e(ue)),{key:1,loading:e($)||e(x),onClick:g[1]||(g[1]=()=>{var S;return(S=s.drawerApi)==null?void 0:S.onConfirm()})},{default:f(()=>[h(n.$slots,"confirmText",{},()=>[F(M(e(U)||e(l)("confirm")),1)])]),_:3},8,["loading"])):v("",!0)]),h(n.$slots,"append-footer")]),_:3},8,["class"])):v("",!0)]),_:3},8,["append-to","class","modal","open","side","z-index","force-mount","overlay-blur"])]}),_:3},8,["open"])}}});class Bt{constructor(t={}){R(this,"sharedData",{payload:{}});R(this,"store");R(this,"api");R(this,"state");const u=t,{connectedComponent:o,onBeforeClose:a,onCancel:i,onClosed:l,onConfirm:C,onOpenChange:w,onOpened:y}=u,d=z(u,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),b={class:"",closable:!0,closeIconPlacement:"right",closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",footer:!0,header:!0,isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,placement:"right",showCancelButton:!0,showConfirmButton:!0,submitting:!1,title:""};this.store=new rt(p(p({},b),d),{onUpdate:()=>{var D,A,$;const m=this.store.state;(m==null?void 0:m.isOpen)===((D=this.state)==null?void 0:D.isOpen)?this.state=m:(this.state=m,($=(A=this.api).onOpenChange)==null||$.call(A,!!(m!=null&&m.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:a,onCancel:i,onClosed:l,onConfirm:C,onOpenChange:w,onOpened:y},Ye(this)}close(){return K(this,null,function*(){var o,a,i;((i=yield(a=(o=this.api).onBeforeClose)==null?void 0:a.call(o))!=null?i:!0)&&this.store.setState(l=>k(p({},l),{isOpen:!1,submitting:!1}))})}getData(){var t,o;return(o=(t=this.sharedData)==null?void 0:t.payload)!=null?o:{}}lock(t=!0){return this.setState({submitting:t})}onCancel(){var t,o;this.api.onCancel?(o=(t=this.api).onCancel)==null||o.call(t):this.close()}onClosed(){var t,o;this.state.isOpen||(o=(t=this.api).onClosed)==null||o.call(t)}onConfirm(){var t,o;(o=(t=this.api).onConfirm)==null||o.call(t)}onOpened(){var t,o;this.state.isOpen&&((o=(t=this.api).onOpened)==null||o.call(t))}open(){this.store.setState(t=>k(p({},t),{isOpen:!0}))}setData(t){return this.sharedData.payload=t,this}setState(t){return qe(t)?this.store.setState(t):this.store.setState(o=>p(p({},o),t)),this}unlock(){return this.lock(!1)}}const me=Symbol("VBEN_DRAWER_INJECT"),Ot={};function Pt(s={}){var y;const{connectedComponent:t}=s;if(t){const d=Ge({}),b=V(!0);return[_((m,{attrs:D,slots:A})=>(we(me,{extendApi(U){Object.setPrototypeOf(d,U)},options:s,reCreateDrawer(){return K(this,null,function*(){b.value=!1,yield Ce(),b.value=!0})}}),At(d,p(p(p({},m),D),A)),()=>ie(b.value?t:"div",p(p({},m),D),A)),{name:"VbenParentDrawer",inheritAttrs:!1}),d]}const o=be(me,{}),a=p(p(p({},Ot),o.options),s);a.onOpenChange=d=>{var b,u,m;(b=s.onOpenChange)==null||b.call(s,d),(m=(u=o.options)==null?void 0:u.onOpenChange)==null||m.call(u,d)};const i=a.onClosed;a.onClosed=()=>{var d;i==null||i(),a.destroyOnClose&&((d=o.reCreateDrawer)==null||d.call(o))};const l=new Bt(a),C=l;C.useStore=d=>it(l.store,d);const w=_((d,{attrs:b,slots:u})=>()=>ie(xt,k(p(p({},d),b),{drawerApi:C}),u),{name:"VbenDrawer",inheritAttrs:!1});return(y=o.extendApi)==null||y.call(o,C),[w,C]}function At(s,t){return K(this,null,function*(){var i;if(!t||Object.keys(t).length===0)return;yield Ce();const o=(i=s==null?void 0:s.store)==null?void 0:i.state;if(!o)return;const a=new Set(Object.keys(o));for(const l of Object.keys(t))a.has(l)&&!["class"].includes(l)&&console.warn(`[Vben Drawer]: When 'connectedComponent' exists, do not set props or slots '${l}', which will increase complexity. If you need to modify the props of Drawer, please use useVbenDrawer or api.`)})}export{Pt as u};
