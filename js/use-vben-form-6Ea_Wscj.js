var ws=Object.defineProperty,Cs=Object.defineProperties;var Ss=Object.getOwnPropertyDescriptors;var Xe=Object.getOwnPropertySymbols;var Ft=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable;var It=Math.pow,ut=(s,e,t)=>e in s?ws(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,c=(s,e)=>{for(var t in e||(e={}))Ft.call(e,t)&&ut(s,t,e[t]);if(Xe)for(var t of Xe(e))Vt.call(e,t)&&ut(s,t,e[t]);return s},C=(s,e)=>Cs(s,Ss(e));var $t=(s,e)=>{var t={};for(var n in s)Ft.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&Xe)for(var n of Xe(s))e.indexOf(n)<0&&Vt.call(s,n)&&(t[n]=s[n]);return t};var Q=(s,e,t)=>ut(s,typeof e!="symbol"?e+"":e,t);var N=(s,e,t)=>new Promise((n,r)=>{var a=l=>{try{o(t.next(l))}catch(u){r(u)}},i=l=>{try{o(t.throw(l))}catch(u){r(u)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(a,i);o((t=t.apply(s,e)).next())});import{a1 as me,ai as L,aj as $,a9 as g,a5 as Os,ak as Z,al as D,p as te,aR as ie,aS as X,aW as Ts,aX as is,ap as be,az as qe,ax as et,ay as je,L as ue,U as xe,a4 as Rs,m as Se,bv as Ns,bi as As,Q as Mt,i as H,bw as ze,bx as Es,by as Zt,j as Ct,bz as Fs,bA as Vs,aA as Is,E as V,a as de,an as B,F as mt,ar as Ue,ag as oe,bB as $s,bC as dt,bu as os,ad as Ms,aU as Zs,am as Ps,b0 as ls,aq as St,av as ye,aw as ge,V as st,bD as js,aa as cs,aL as Ds,aP as Ls,a0 as Bs,aE as zs,R as Us,a8 as qs,f as Ws}from"../jse/index-index-C2P5BEtU.js";import{b1 as Hs,b2 as Ys,b3 as pt,b4 as Gs,b5 as Js,aV as us,b6 as Qs,b7 as ds,b8 as Xs,b9 as Ot,ba as Ks,bb as en,bc as tt,bd as tn,be as sn,bf as fs,bg as nn,bh as rn,a8 as an,a7 as on,bi as ln,bj as cn,bk as un,bl as dn,bm as fn,bn as hn}from"./bootstrap-8xWW0-wo.js";import{u as mn,_ as pn,a as yn,b as gn,c as vn}from"./FormLabel.vue_vue_type_script_setup_true_lang-hhDxVE7f.js";import{_ as De}from"./render-content.vue_vue_type_script_lang-DA_s9U_C.js";function Pt(s){return s!==null&&(typeof s=="object"||typeof s=="function")}const _n=/^(?:0|[1-9]\d*)$/;function bn(s,e=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<e;case"symbol":return!1;case"string":return _n.test(s)}}function xn(s){return typeof s=="symbol"||s instanceof Symbol}const kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wn=/^\w*$/;function Cn(s,e){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||xn(s)?!0:typeof s=="string"&&(wn.test(s)||!kn.test(s))||e!=null&&Object.hasOwn(e,s)}const Sn=(s,e,t)=>{const n=s[e];(!(Object.hasOwn(s,e)&&Hs(n,t))||t===void 0&&!(e in s))&&(s[e]=t)};function On(s,e,t,n){if(s==null&&!Pt(s))return s;const r=Cn(e,s)?[e]:Array.isArray(e)?e:typeof e=="string"?Ys(e):[e],a=t(pt(s,r));let i=s;for(let o=0;o<r.length&&i!=null;o++){const l=Gs(r[o]);if(Js(l))continue;let u;if(o===r.length-1)u=a;else{const f=i[l],m=n==null?void 0:n(f,l,s);u=m!==void 0?m:Pt(f)?f:bn(r[o+1])?[]:{}}Sn(i,l,u),i=i[l]}return s}function yt(s,e,t){return On(s,e,()=>t,()=>{})}const Tn=us("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Rn=us("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),jt=me({__name:"FormMessage",setup(s){const{formMessageId:e,name:t}=mn();return(n,r)=>($(),L(g(Qs),{id:g(e),name:Os(g(t)),as:"p",class:"text-[0.8rem] text-destructive"},null,8,["id","name"]))}}),Nn=me({inheritAttrs:!1,__name:"help-tooltip",props:{triggerClass:{}},setup(s){return(e,t)=>($(),L(ds,{"delay-duration":300,side:"right"},{trigger:Z(()=>[D(e.$slots,"trigger",{},()=>[te(g(Rn),{class:ie(g(X)("inline-flex size-5 cursor-pointer text-foreground/80 hover:text-foreground",s.triggerClass))},null,8,["class"])])]),default:Z(()=>[D(e.$slots,"default")]),_:3}))}}),An=me({__name:"expandable-arrow",props:Ts({class:{}},{modelValue:{default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const e=s,t=is(s,"modelValue");return(n,r)=>($(),be("div",{class:ie(g(X)("vben-link inline-flex items-center",e.class)),onClick:r[0]||(r[0]=a=>t.value=!t.value)},[D(n.$slots,"default",{isExpanded:t.value},()=>[et(je(t.value),1)]),qe("div",{class:ie([{"rotate-180":!t.value},"transition-transform duration-300"])},[D(n.$slots,"icon",{},()=>[te(g(Xs),{class:"size-4"})])],2)],2))}}),gt=new WeakMap,En=new WeakMap,nt={current:[]};let ft=!1;const Ke=new Set,Dt=new Map;function hs(s){for(const e of s){if(nt.current.includes(e))continue;nt.current.push(e),e.recompute();const t=En.get(e);if(t)for(const n of t){const r=gt.get(n);r!=null&&r.length&&hs(r)}}}function Fn(s){const e={prevVal:s.prevState,currentVal:s.state};for(const t of s.listeners)t(e)}function Vn(s){const e={prevVal:s.prevState,currentVal:s.state};for(const t of s.listeners)t(e)}function In(s){var e;if(Ke.add(s),!ft)try{for(ft=!0;Ke.size>0;){const t=Array.from(Ke);Ke.clear();for(const n of t){const r=(e=Dt.get(n))!=null?e:n.prevState;n.prevState=r,Fn(n)}for(const n of t){const r=gt.get(n);r&&(nt.current.push(n),hs(r))}for(const n of t){const r=gt.get(n);if(r)for(const a of r)Vn(a)}}}finally{ft=!1,nt.current=[],Dt.clear()}}function $n(s){return typeof s=="function"}class Mn{constructor(e,t){this.listeners=new Set,this.subscribe=n=>{var r,a;this.listeners.add(n);const i=(a=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:a.call(r,n,this);return()=>{this.listeners.delete(n),i==null||i()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,n,r;this.prevState=this.state,(t=this.options)!=null&&t.updateFn?this.state=this.options.updateFn(this.prevState)(e):$n(e)?this.state=e(this.prevState):this.state=e,(r=(n=this.options)==null?void 0:n.onUpdate)==null||r.call(n),In(this)}}function Zn(s,e=n=>n,t={}){var a;const n=ue(e(s.state)),r=(a=t.equal)!=null?a:Pn;return xe(()=>s,(i,o,l)=>{const u=i.subscribe(()=>{const f=e(i.state);r(Se(n.value),f)||(n.value=f)});l(()=>{u()})},{immediate:!0}),Rs(n)}function Pn(s,e){if(Object.is(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;if(s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(const[n,r]of s)if(!e.has(n)||!Object.is(r,e.get(n)))return!1;return!0}if(s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(const n of s)if(!e.has(n))return!1;return!0}if(s instanceof Date&&e instanceof Date)return s.getTime()===e.getTime();const t=Object.keys(s);if(t.length!==Object.keys(e).length)return!1;for(let n=0;n<t.length;n++)if(!Object.prototype.hasOwnProperty.call(e,t[n])||!Object.is(s[t[n]],e[t[n]]))return!1;return!0}function jn(){return{actionWrapperClass:"",collapsed:!1,collapsedRows:1,collapseTriggerResize:!1,commonConfig:{},handleReset:void 0,handleSubmit:void 0,handleValuesChange:void 0,handleCollapsedChange:void 0,layout:"horizontal",resetButtonOptions:{},schema:[],scrollToFirstError:!1,showCollapseButton:!1,showDefaultActions:!0,submitButtonOptions:{},submitOnChange:!1,submitOnEnter:!1,wrapperClass:"grid-cols-1"}}class Dn{constructor(e={}){Q(this,"form",{});Q(this,"isMounted",!1);Q(this,"state",null);Q(this,"stateHandler");Q(this,"store");Q(this,"componentRefMap",new Map);Q(this,"latestSubmissionValues",null);Q(this,"prevState",null);Q(this,"handleMultiFields",e=>{var r;const t=(r=this.state)==null?void 0:r.arrayToStringFields;if(!t||!Array.isArray(t))return;const n=(a,i=",")=>{this.processFields(a,i,e,(o,l)=>{if(Array.isArray(o))return o.join(l);if(typeof o=="string"){if(o==="")return[];const u=l.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`);return o.split(new RegExp(u))}else return o})};if(t.every(a=>typeof a=="string")){const a=t[t.length-1]||"",i=a.length===1?t.slice(0,-1):t,o=a.length===1?a:",";n(i,o);return}t.forEach(a=>{if(Array.isArray(a)){const[i,o=","]=a;if(!Array.isArray(i)){console.warn(`Invalid field configuration: fields should be an array of strings, got ${typeof i}`);return}n(i,o)}})});Q(this,"handleRangeTimeValue",e=>{var r;const t=c({},e),n=(r=this.state)==null?void 0:r.fieldMappingTime;return this.handleMultiFields(t),!n||!Array.isArray(n)||n.forEach(([a,[i,o],l="YYYY-MM-DD"])=>{if(i&&o&&t[a]===null&&(Reflect.deleteProperty(t,i),Reflect.deleteProperty(t,o)),!t[a]){Reflect.deleteProperty(t,a);return}const[u,f]=t[a];if(l===null)t[i]=u,t[o]=f;else if(H(l))t[i]=l(u,i),t[o]=l(f,o);else{const[m,_]=Array.isArray(l)?l:[l,l];t[i]=u?Zt(u,m):void 0,t[o]=f?Zt(f,_):void 0}Reflect.deleteProperty(t,a)}),t});Q(this,"processFields",(e,t,n,r)=>{e.forEach(a=>{const i=n[a];i!=null&&(n[a]=r(i,t))})});const t=$t(e,[]),n=jn();this.store=new Mn(c(c({},n),t),{onUpdate:()=>{this.prevState=this.state,this.state=this.store.state,this.updateState()}}),this.state=this.store.state,this.stateHandler=new Ns,As(this)}getFieldComponentRef(e){var n,r;let t=this.componentRefMap.has(e)?this.componentRefMap.get(e):void 0;return t&&t.$.type.name==="AsyncComponentWrapper"&&t.$.subTree.ref&&(Array.isArray(t.$.subTree.ref)?t.$.subTree.ref.length>0&&Mt((n=t.$.subTree.ref[0])==null?void 0:n.r)&&(t=(r=t.$.subTree.ref[0])==null?void 0:r.r.value):Mt(t.$.subTree.ref.r)&&(t=t.$.subTree.ref.r.value)),t}getFocusedField(){for(const e of this.componentRefMap.keys()){const t=this.getFieldComponentRef(e);if(t){let n=null;if(t instanceof HTMLElement?n=t:t.$el instanceof HTMLElement&&(n=t.$el),!n)continue;if(n===document.activeElement||n.contains(document.activeElement))return e}}}getLatestSubmissionValues(){return this.latestSubmissionValues||{}}getState(){return this.state}getValues(){return N(this,null,function*(){const e=yield this.getForm();return e.values?this.handleRangeTimeValue(e.values):{}})}isFieldValid(e){return N(this,null,function*(){return(yield this.getForm()).isFieldValid(e)})}merge(e){const t=[this,e],n=new Proxy(e,{get(r,a){return a==="merge"?i=>(t.push(i),n):a==="submitAllForm"?(i=!0)=>N(null,null,function*(){try{const o=yield Promise.all(t.map(l=>N(null,null,function*(){return(yield l.validate()).valid?Se((yield l.getValues())||{}):void 0})));return i?Object.assign({},...o):o}catch(o){console.error("Validation error:",o)}}):r[a]}});return n}mount(e,t){this.isMounted||(Object.assign(this.form,e),this.stateHandler.setConditionTrue(),this.setLatestSubmissionValues(c({},Se(this.handleRangeTimeValue(this.form.values)))),this.componentRefMap=t,this.isMounted=!0)}removeSchemaByFields(e){return N(this,null,function*(){var a,i;const t=new Set(e),r=((i=(a=this.state)==null?void 0:a.schema)!=null?i:[]).filter(o=>!t.has(o.fieldName));this.setState({schema:r})})}resetForm(e,t){return N(this,null,function*(){return(yield this.getForm()).resetForm(e,t)})}resetValidate(){return N(this,null,function*(){const e=yield this.getForm();Object.keys(e.errors.value).forEach(n=>{e.setFieldError(n,void 0)})})}scrollToFirstError(e){const t=typeof e=="string"?e:Object.keys(e)[0];if(!t)return;let n=document.querySelector(`[name="${t}"]`);if(!n){const r=this.getFieldComponentRef(t);r&&r.$el instanceof HTMLElement&&(n=r.$el)}n&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}setFieldValue(e,t,n){return N(this,null,function*(){(yield this.getForm()).setFieldValue(e,t,n)})}setLatestSubmissionValues(e){this.latestSubmissionValues=c({},Se(e))}setState(e){H(e)?this.store.setState(t=>ze(e(t),t)):this.store.setState(t=>ze(e,t))}setValues(e,t=!0,n=!1){return N(this,null,function*(){const r=yield this.getForm();if(!t){r.setValues(e,n);return}const a=Es((o,l,u)=>(l in o&&(o[l]=!Array.isArray(o[l])&&Ct(o[l])&&!Fs(o[l])&&!Vs(o[l])?a(u,o[l]):u),!0)),i=a(e,r.values);r.setValues(i,n)})}submitForm(e){return N(this,null,function*(){var r,a;e==null||e.preventDefault(),e==null||e.stopPropagation(),yield(yield this.getForm()).submitForm();const n=Se(yield this.getValues());return yield(a=(r=this.state)==null?void 0:r.handleSubmit)==null?void 0:a.call(r,n),n})}unmount(){var e,t;(t=(e=this.form)==null?void 0:e.resetForm)==null||t.call(e),this.latestSubmissionValues=null,this.isMounted=!1,this.stateHandler.reset()}updateSchema(e){var i,o;const t=[...e];if(!t.every(l=>Reflect.has(l,"fieldName")&&l.fieldName)){console.error("All items in the schema array must have a valid `fieldName` property to be updated");return}const r=[...(o=(i=this.state)==null?void 0:i.schema)!=null?o:[]],a={};t.forEach(l=>{l.fieldName&&(a[l.fieldName]=l)}),r.forEach((l,u)=>{const f=a[l.fieldName];f&&(r[u]=ze(f,l))}),this.setState({schema:r})}validate(e){return N(this,null,function*(){var r,a;const n=yield(yield this.getForm()).validate(e);return Object.keys((r=n==null?void 0:n.errors)!=null?r:{}).length>0&&(console.error("validate error",n==null?void 0:n.errors),(a=this.state)!=null&&a.scrollToFirstError&&this.scrollToFirstError(n.errors)),n})}validateAndSubmitForm(){return N(this,null,function*(){var r;const e=yield this.getForm(),{valid:t,errors:n}=yield e.validate();if(!t){(r=this.state)!=null&&r.scrollToFirstError&&this.scrollToFirstError(n);return}return yield this.submitForm()})}validateField(e,t){return N(this,null,function*(){var a,i;const r=yield(yield this.getForm()).validateField(e,t);return Object.keys((a=r==null?void 0:r.errors)!=null?a:{}).length>0&&(console.error("validate error",r==null?void 0:r.errors),(i=this.state)!=null&&i.scrollToFirstError&&this.scrollToFirstError(e)),r})}getForm(){return N(this,null,function*(){var e;if(this.isMounted||(yield this.stateHandler.waitForCondition()),!((e=this.form)!=null&&e.meta))throw new Error("<VbenForm /> is not mounted");return this.form})}updateState(){var n,r,a,i,o,l;const e=(r=(n=this.state)==null?void 0:n.schema)!=null?r:[],t=(i=(a=this.prevState)==null?void 0:a.schema)!=null?i:[];if(e.length<t.length){const u=new Set(e.map(m=>m.fieldName)),f=t.filter(m=>!u.has(m.fieldName));for(const m of f)(l=(o=this.form)==null?void 0:o.setFieldValue)==null||l.call(o,m.fieldName,void 0)}}}var A;(function(s){s.assertEqual=r=>{};function e(r){}s.assertIs=e;function t(r){throw new Error}s.assertNever=t,s.arrayToEnum=r=>{const a={};for(const i of r)a[i]=i;return a},s.getValidEnumValues=r=>{const a=s.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),i={};for(const o of a)i[o]=r[o];return s.objectValues(i)},s.objectValues=r=>s.objectKeys(r).map(function(a){return r[a]}),s.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&a.push(i);return a},s.find=(r,a)=>{for(const i of r)if(a(i))return i},s.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function n(r,a=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}s.joinValues=n,s.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(A||(A={}));var Lt;(function(s){s.mergeShapes=(e,t)=>c(c({},e),t)})(Lt||(Lt={}));const p=A.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ve=s=>{switch(typeof s){case"undefined":return p.undefined;case"string":return p.string;case"number":return Number.isNaN(s)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"symbol":return p.symbol;case"object":return Array.isArray(s)?p.array:s===null?p.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?p.promise:typeof Map!="undefined"&&s instanceof Map?p.map:typeof Set!="undefined"&&s instanceof Set?p.set:typeof Date!="undefined"&&s instanceof Date?p.date:p.object;default:return p.unknown}},d=A.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class he extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},r=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let o=n,l=0;for(;l<i.path.length;){const u=i.path[l];l===i.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(t(i))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return r(this),n}static assert(e){if(!(e instanceof he))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,A.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const a=r.path[0];t[a]=t[a]||[],t[a].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}he.create=s=>new he(s);const vt=(s,e)=>{let t;switch(s.code){case d.invalid_type:s.received===p.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case d.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,A.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:t=`Unrecognized key(s) in object: ${A.joinValues(s.keys,", ")}`;break;case d.invalid_union:t="Invalid input";break;case d.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${A.joinValues(s.options)}`;break;case d.invalid_enum_value:t=`Invalid enum value. Expected ${A.joinValues(s.options)}, received '${s.received}'`;break;case d.invalid_arguments:t="Invalid function arguments";break;case d.invalid_return_type:t="Invalid function return type";break;case d.invalid_date:t="Invalid date";break;case d.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:A.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case d.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="bigint"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case d.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case d.custom:t="Invalid input";break;case d.invalid_intersection_types:t="Intersection results could not be merged";break;case d.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case d.not_finite:t="Number must be finite";break;default:t=e.defaultError,A.assertNever(s)}return{message:t}};let Ln=vt;function Bn(){return Ln}const zn=s=>{const{data:e,path:t,errorMaps:n,issueData:r}=s,a=[...t,...r.path||[]],i=C(c({},r),{path:a});if(r.message!==void 0)return C(c({},r),{path:a,message:r.message});let o="";const l=n.filter(u=>!!u).slice().reverse();for(const u of l)o=u(i,{data:e,defaultError:o}).message;return C(c({},r),{path:a,message:o})};function h(s,e){const t=Bn(),n=zn({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===vt?void 0:vt].filter(r=>!!r)});s.common.issues.push(n)}class W{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if(r.status==="aborted")return k;r.status==="dirty"&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static mergeObjectAsync(e,t){return N(this,null,function*(){const n=[];for(const r of t){const a=yield r.key,i=yield r.value;n.push({key:a,value:i})}return W.mergeObjectSync(e,n)})}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:a,value:i}=r;if(a.status==="aborted"||i.status==="aborted")return k;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value!="undefined"||r.alwaysSet)&&(n[a.value]=i.value)}return{status:e.value,value:n}}}const k=Object.freeze({status:"aborted"}),Le=s=>({status:"dirty",value:s}),K=s=>({status:"valid",value:s}),Bt=s=>s.status==="aborted",zt=s=>s.status==="dirty",Ee=s=>s.status==="valid",rt=s=>typeof Promise!="undefined"&&s instanceof Promise;var y;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(y||(y={}));class le{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ut=(s,e)=>{if(Ee(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new he(s.common.issues);return this._error=t,this._error}}};function S(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:r}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(i,o)=>{var u,f;const{message:l}=s;return i.code==="invalid_enum_value"?{message:l!=null?l:o.defaultError}:typeof o.data=="undefined"?{message:(u=l!=null?l:n)!=null?u:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(f=l!=null?l:t)!=null?f:o.defaultError}},description:r}}class T{get description(){return this._def.description}_getType(e){return ve(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new W,ctx:{common:e.parent.common,data:e.data,parsedType:ve(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(rt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var a;const n={common:{issues:[],async:(a=t==null?void 0:t.async)!=null?a:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)},r=this._parseSync({data:e,path:n.path,parent:n});return Ut(n,r)}"~validate"(e){var n,r;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return Ee(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(r=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>Ee(a)?{value:a.value}:{issues:t.common.issues})}parseAsync(e,t){return N(this,null,function*(){const n=yield this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error})}safeParseAsync(e,t){return N(this,null,function*(){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ve(e)},r=this._parse({data:e,path:n.path,parent:n}),a=yield rt(r)?r:Promise.resolve(r);return Ut(n,a)})}refine(e,t){const n=r=>typeof t=="string"||typeof t=="undefined"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{const i=e(r),o=()=>a.addIssue(c({code:d.custom},n(r)));return typeof Promise!="undefined"&&i instanceof Promise?i.then(l=>l?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t=="function"?t(n,r):t),!1))}_refinement(e){return new re({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return fe.create(this,this._def)}nullable(){return Ie.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ne.create(this)}promise(){return ot.create(this,this._def)}or(e){return Fe.create([this,e],this._def)}and(e){return Te.create(this,e,this._def)}transform(e){return new re(C(c({},S(this._def)),{schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t=typeof e=="function"?e:()=>e;return new $e(C(c({},S(this._def)),{innerType:this,defaultValue:t,typeName:x.ZodDefault}))}brand(){return new fr(c({typeName:x.ZodBranded,type:this},S(this._def)))}catch(e){const t=typeof e=="function"?e:()=>e;return new bt(C(c({},S(this._def)),{innerType:this,catchValue:t,typeName:x.ZodCatch}))}describe(e){const t=this.constructor;return new t(C(c({},this._def),{description:e}))}pipe(e){return Tt.create(this,e)}readonly(){return xt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Un=/^c[^\s-]{8,}$/i,qn=/^[0-9a-z]+$/,Wn=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Hn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Yn=/^[a-z0-9_-]{21}$/i,Gn=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Jn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Qn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Xn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ht;const Kn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,er=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,sr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,nr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ms="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ar=new RegExp(`^${ms}$`);function ps(s){let e="[0-5]\\d";s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`);const t=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function ir(s){return new RegExp(`^${ps(s)}$`)}function or(s){let e=`${ms}T${ps(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function lr(s,e){return!!((e==="v4"||!e)&&Kn.test(s)||(e==="v6"||!e)&&tr.test(s))}function cr(s,e){if(!Gn.test(s))return!1;try{const[t]=s.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(n));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch(t){return!1}}function ur(s,e){return!!((e==="v4"||!e)&&er.test(s)||(e==="v6"||!e)&&sr.test(s))}class se extends T{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.string){const a=this._getOrReturnCtx(e);return h(a,{code:d.invalid_type,expected:p.string,received:a.parsedType}),k}const n=new W;let r;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(r=this._getOrReturnCtx(e,r),i?h(r,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&h(r,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Qn.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"email",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")ht||(ht=new RegExp(Xn,"u")),ht.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"emoji",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Hn.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"uuid",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Yn.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"nanoid",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")Un.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"cuid",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")qn.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"cuid2",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Wn.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"ulid",code:d.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch(i){r=this._getOrReturnCtx(e,r),h(r,{validation:"url",code:d.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"regex",code:d.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?or(a).test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?ar.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?ir(a).test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Jn.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"duration",code:d.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?lr(e.data,a.version)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"ip",code:d.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?cr(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"jwt",code:d.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?ur(e.data,a.version)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"cidr",code:d.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?nr.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"base64",code:d.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?rr.test(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{validation:"base64url",code:d.invalid_string,message:a.message}),n.dirty()):A.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(r=>e.test(r),c({validation:t,code:d.invalid_string},y.errToObj(n)))}_addCheck(e){return new se(C(c({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(c({kind:"email"},y.errToObj(e)))}url(e){return this._addCheck(c({kind:"url"},y.errToObj(e)))}emoji(e){return this._addCheck(c({kind:"emoji"},y.errToObj(e)))}uuid(e){return this._addCheck(c({kind:"uuid"},y.errToObj(e)))}nanoid(e){return this._addCheck(c({kind:"nanoid"},y.errToObj(e)))}cuid(e){return this._addCheck(c({kind:"cuid"},y.errToObj(e)))}cuid2(e){return this._addCheck(c({kind:"cuid2"},y.errToObj(e)))}ulid(e){return this._addCheck(c({kind:"ulid"},y.errToObj(e)))}base64(e){return this._addCheck(c({kind:"base64"},y.errToObj(e)))}base64url(e){return this._addCheck(c({kind:"base64url"},y.errToObj(e)))}jwt(e){return this._addCheck(c({kind:"jwt"},y.errToObj(e)))}ip(e){return this._addCheck(c({kind:"ip"},y.errToObj(e)))}cidr(e){return this._addCheck(c({kind:"cidr"},y.errToObj(e)))}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(c({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!=null?t:!1,local:(n=e==null?void 0:e.local)!=null?n:!1},y.errToObj(e==null?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(c({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision},y.errToObj(e==null?void 0:e.message)))}duration(e){return this._addCheck(c({kind:"duration"},y.errToObj(e)))}regex(e,t){return this._addCheck(c({kind:"regex",regex:e},y.errToObj(t)))}includes(e,t){return this._addCheck(c({kind:"includes",value:e,position:t==null?void 0:t.position},y.errToObj(t==null?void 0:t.message)))}startsWith(e,t){return this._addCheck(c({kind:"startsWith",value:e},y.errToObj(t)))}endsWith(e,t){return this._addCheck(c({kind:"endsWith",value:e},y.errToObj(t)))}min(e,t){return this._addCheck(c({kind:"min",value:e},y.errToObj(t)))}max(e,t){return this._addCheck(c({kind:"max",value:e},y.errToObj(t)))}length(e,t){return this._addCheck(c({kind:"length",value:e},y.errToObj(t)))}nonempty(e){return this.min(1,y.errToObj(e))}trim(){return new se(C(c({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new se(C(c({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new se(C(c({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}se.create=s=>{var e;return new se(c({checks:[],typeName:x.ZodString,coerce:(e=s==null?void 0:s.coerce)!=null?e:!1},S(s)))};function dr(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,r=t>n?t:n,a=Number.parseInt(s.toFixed(r).replace(".","")),i=Number.parseInt(e.toFixed(r).replace(".",""));return a%i/It(10,r)}class Oe extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.number){const a=this._getOrReturnCtx(e);return h(a,{code:d.invalid_type,expected:p.number,received:a.parsedType}),k}let n;const r=new W;for(const a of this._def.checks)a.kind==="int"?A.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:d.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),h(n,{code:d.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),h(n,{code:d.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?dr(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),h(n,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),h(n,{code:d.not_finite,message:a.message}),r.dirty()):A.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,n,r){return new Oe(C(c({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:y.toString(r)}]}))}_addCheck(e){return new Oe(C(c({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:y.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&A.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Oe.create=s=>new Oe(c({checks:[],typeName:x.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1},S(s)));class We extends T{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(a){return this._getInvalidInput(e)}if(this._getType(e)!==p.bigint)return this._getInvalidInput(e);let n;const r=new W;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),h(n,{code:d.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),h(n,{code:d.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),h(n,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):A.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return h(t,{code:d.invalid_type,expected:p.bigint,received:t.parsedType}),k}gte(e,t){return this.setLimit("min",e,!0,y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,y.toString(t))}setLimit(e,t,n,r){return new We(C(c({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:y.toString(r)}]}))}_addCheck(e){return new We(C(c({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:y.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}We.create=s=>{var e;return new We(c({checks:[],typeName:x.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!=null?e:!1},S(s)))};class at extends T{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.boolean){const n=this._getOrReturnCtx(e);return h(n,{code:d.invalid_type,expected:p.boolean,received:n.parsedType}),k}return K(e.data)}}at.create=s=>new at(c({typeName:x.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1},S(s)));class it extends T{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.date){const a=this._getOrReturnCtx(e);return h(a,{code:d.invalid_type,expected:p.date,received:a.parsedType}),k}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return h(a,{code:d.invalid_date}),k}const n=new W;let r;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):A.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new it(C(c({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:y.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}it.create=s=>new it(c({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:x.ZodDate},S(s)));class qt extends T{_parse(e){if(this._getType(e)!==p.symbol){const n=this._getOrReturnCtx(e);return h(n,{code:d.invalid_type,expected:p.symbol,received:n.parsedType}),k}return K(e.data)}}qt.create=s=>new qt(c({typeName:x.ZodSymbol},S(s)));class Wt extends T{_parse(e){if(this._getType(e)!==p.undefined){const n=this._getOrReturnCtx(e);return h(n,{code:d.invalid_type,expected:p.undefined,received:n.parsedType}),k}return K(e.data)}}Wt.create=s=>new Wt(c({typeName:x.ZodUndefined},S(s)));class Ht extends T{_parse(e){if(this._getType(e)!==p.null){const n=this._getOrReturnCtx(e);return h(n,{code:d.invalid_type,expected:p.null,received:n.parsedType}),k}return K(e.data)}}Ht.create=s=>new Ht(c({typeName:x.ZodNull},S(s)));class Yt extends T{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}Yt.create=s=>new Yt(c({typeName:x.ZodAny},S(s)));class Gt extends T{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}Gt.create=s=>new Gt(c({typeName:x.ZodUnknown},S(s)));class ke extends T{_parse(e){const t=this._getOrReturnCtx(e);return h(t,{code:d.invalid_type,expected:p.never,received:t.parsedType}),k}}ke.create=s=>new ke(c({typeName:x.ZodNever},S(s)));class Jt extends T{_parse(e){if(this._getType(e)!==p.undefined){const n=this._getOrReturnCtx(e);return h(n,{code:d.invalid_type,expected:p.void,received:n.parsedType}),k}return K(e.data)}}Jt.create=s=>new Jt(c({typeName:x.ZodVoid},S(s)));class ne extends T{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==p.array)return h(t,{code:d.invalid_type,expected:p.array,received:t.parsedType}),k;if(r.exactLength!==null){const i=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(i||o)&&(h(t,{code:i?d.too_big:d.too_small,minimum:o?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(h(t,{code:d.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(h(t,{code:d.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>r.type._parseAsync(new le(t,i,t.path,o)))).then(i=>W.mergeArray(n,i));const a=[...t.data].map((i,o)=>r.type._parseSync(new le(t,i,t.path,o)));return W.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new ne(C(c({},this._def),{minLength:{value:e,message:y.toString(t)}}))}max(e,t){return new ne(C(c({},this._def),{maxLength:{value:e,message:y.toString(t)}}))}length(e,t){return new ne(C(c({},this._def),{exactLength:{value:e,message:y.toString(t)}}))}nonempty(e){return this.min(1,e)}}ne.create=(s,e)=>new ne(c({type:s,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray},S(e)));function Ae(s){if(s instanceof I){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=fe.create(Ae(n))}return new I(C(c({},s._def),{shape:()=>e}))}else return s instanceof ne?new ne(C(c({},s._def),{type:Ae(s.element)})):s instanceof fe?fe.create(Ae(s.unwrap())):s instanceof Ie?Ie.create(Ae(s.unwrap())):s instanceof we?we.create(s.items.map(e=>Ae(e))):s}class I extends T{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=A.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==p.object){const u=this._getOrReturnCtx(e);return h(u,{code:d.invalid_type,expected:p.object,received:u.parsedType}),k}const{status:n,ctx:r}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof ke&&this._def.unknownKeys==="strip"))for(const u in r.data)i.includes(u)||o.push(u);const l=[];for(const u of i){const f=a[u],m=r.data[u];l.push({key:{status:"valid",value:u},value:f._parse(new le(r,m,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof ke){const u=this._def.unknownKeys;if(u==="passthrough")for(const f of o)l.push({key:{status:"valid",value:f},value:{status:"valid",value:r.data[f]}});else if(u==="strict")o.length>0&&(h(r,{code:d.unrecognized_keys,keys:o}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const f of o){const m=r.data[f];l.push({key:{status:"valid",value:f},value:u._parse(new le(r,m,r.path,f)),alwaysSet:f in r.data})}}return r.common.async?Promise.resolve().then(()=>N(this,null,function*(){const u=[];for(const f of l){const m=yield f.key,_=yield f.value;u.push({key:m,value:_,alwaysSet:f.alwaysSet})}return u})).then(u=>W.mergeObjectSync(n,u)):W.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return y.errToObj,new I(c(C(c({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(t,n)=>{var a,i,o,l;const r=(o=(i=(a=this._def).errorMap)==null?void 0:i.call(a,t,n).message)!=null?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(l=y.errToObj(e).message)!=null?l:r}:{message:r}}}:{}))}strip(){return new I(C(c({},this._def),{unknownKeys:"strip"}))}passthrough(){return new I(C(c({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new I(C(c({},this._def),{shape:()=>c(c({},this._def.shape()),e)}))}merge(e){return new I({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>c(c({},this._def.shape()),e._def.shape()),typeName:x.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new I(C(c({},this._def),{catchall:e}))}pick(e){const t={};for(const n of A.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new I(C(c({},this._def),{shape:()=>t}))}omit(e){const t={};for(const n of A.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new I(C(c({},this._def),{shape:()=>t}))}deepPartial(){return Ae(this)}partial(e){const t={};for(const n of A.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new I(C(c({},this._def),{shape:()=>t}))}required(e){const t={};for(const n of A.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof fe;)a=a._def.innerType;t[n]=a}return new I(C(c({},this._def),{shape:()=>t}))}keyof(){return ys(A.objectKeys(this.shape))}}I.create=(s,e)=>new I(c({shape:()=>s,unknownKeys:"strip",catchall:ke.create(),typeName:x.ZodObject},S(e)));I.strictCreate=(s,e)=>new I(c({shape:()=>s,unknownKeys:"strict",catchall:ke.create(),typeName:x.ZodObject},S(e)));I.lazycreate=(s,e)=>new I(c({shape:s,unknownKeys:"strip",catchall:ke.create(),typeName:x.ZodObject},S(e)));class Fe extends T{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function r(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new he(o.ctx.common.issues));return h(t,{code:d.invalid_union,unionErrors:i}),k}if(t.common.async)return Promise.all(n.map(a=>N(this,null,function*(){const i=C(c({},t),{common:C(c({},t.common),{issues:[]}),parent:null});return{result:yield a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}}))).then(r);{let a;const i=[];for(const l of n){const u=C(c({},t),{common:C(c({},t.common),{issues:[]}),parent:null}),f=l._parseSync({data:t.data,path:t.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(l=>new he(l));return h(t,{code:d.invalid_union,unionErrors:o}),k}}get options(){return this._def.options}}Fe.create=(s,e)=>new Fe(c({options:s,typeName:x.ZodUnion},S(e)));function _t(s,e){const t=ve(s),n=ve(e);if(s===e)return{valid:!0,data:s};if(t===p.object&&n===p.object){const r=A.objectKeys(e),a=A.objectKeys(s).filter(o=>r.indexOf(o)!==-1),i=c(c({},s),e);for(const o of a){const l=_t(s[o],e[o]);if(!l.valid)return{valid:!1};i[o]=l.data}return{valid:!0,data:i}}else if(t===p.array&&n===p.array){if(s.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<s.length;a++){const i=s[a],o=e[a],l=_t(i,o);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return t===p.date&&n===p.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class Te extends T{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(a,i)=>{if(Bt(a)||Bt(i))return k;const o=_t(a.value,i.value);return o.valid?((zt(a)||zt(i))&&t.dirty(),{status:t.value,value:o.data}):(h(n,{code:d.invalid_intersection_types}),k)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>r(a,i)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Te.create=(s,e,t)=>new Te(c({left:s,right:e,typeName:x.ZodIntersection},S(t)));class we extends T{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.array)return h(n,{code:d.invalid_type,expected:p.array,received:n.parsedType}),k;if(n.data.length<this._def.items.length)return h(n,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&n.data.length>this._def.items.length&&(h(n,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((i,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new le(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>W.mergeArray(t,i)):W.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new we(C(c({},this._def),{rest:e}))}}we.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new we(c({items:s,typeName:x.ZodTuple,rest:null},S(e)))};class Re extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.object)return h(n,{code:d.invalid_type,expected:p.object,received:n.parsedType}),k;const r=[],a=this._def.keyType,i=this._def.valueType;for(const o in n.data)r.push({key:a._parse(new le(n,o,n.path,o)),value:i._parse(new le(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?W.mergeObjectAsync(t,r):W.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof T?new Re(c({keyType:e,valueType:t,typeName:x.ZodRecord},S(n))):new Re(c({keyType:se.create(),valueType:e,typeName:x.ZodRecord},S(t)))}}class Qt extends T{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.map)return h(n,{code:d.invalid_type,expected:p.map,received:n.parsedType}),k;const r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([o,l],u)=>({key:r._parse(new le(n,o,n.path,[u,"key"])),value:a._parse(new le(n,l,n.path,[u,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(()=>N(this,null,function*(){for(const l of i){const u=yield l.key,f=yield l.value;if(u.status==="aborted"||f.status==="aborted")return k;(u.status==="dirty"||f.status==="dirty")&&t.dirty(),o.set(u.value,f.value)}return{status:t.value,value:o}}))}else{const o=new Map;for(const l of i){const u=l.key,f=l.value;if(u.status==="aborted"||f.status==="aborted")return k;(u.status==="dirty"||f.status==="dirty")&&t.dirty(),o.set(u.value,f.value)}return{status:t.value,value:o}}}}Qt.create=(s,e,t)=>new Qt(c({valueType:e,keyType:s,typeName:x.ZodMap},S(t)));class He extends T{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==p.set)return h(n,{code:d.invalid_type,expected:p.set,received:n.parsedType}),k;const r=this._def;r.minSize!==null&&n.data.size<r.minSize.value&&(h(n,{code:d.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&n.data.size>r.maxSize.value&&(h(n,{code:d.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function i(l){const u=new Set;for(const f of l){if(f.status==="aborted")return k;f.status==="dirty"&&t.dirty(),u.add(f.value)}return{status:t.value,value:u}}const o=[...n.data.values()].map((l,u)=>a._parse(new le(n,l,n.path,u)));return n.common.async?Promise.all(o).then(l=>i(l)):i(o)}min(e,t){return new He(C(c({},this._def),{minSize:{value:e,message:y.toString(t)}}))}max(e,t){return new He(C(c({},this._def),{maxSize:{value:e,message:y.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}He.create=(s,e)=>new He(c({valueType:s,minSize:null,maxSize:null,typeName:x.ZodSet},S(e)));class Xt extends T{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Xt.create=(s,e)=>new Xt(c({getter:s,typeName:x.ZodLazy},S(e)));class Kt extends T{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:e.data}}get value(){return this._def.value}}Kt.create=(s,e)=>new Kt(c({value:s,typeName:x.ZodLiteral},S(e)));function ys(s,e){return new Ve(c({values:s,typeName:x.ZodEnum},S(e)))}class Ve extends T{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return h(t,{expected:A.joinValues(n),received:t.parsedType,code:d.invalid_type}),k}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return h(t,{received:t.data,code:d.invalid_enum_value,options:n}),k}return K(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ve.create(e,c(c({},this._def),t))}exclude(e,t=this._def){return Ve.create(this.options.filter(n=>!e.includes(n)),c(c({},this._def),t))}}Ve.create=ys;class es extends T{_parse(e){const t=A.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==p.string&&n.parsedType!==p.number){const r=A.objectValues(t);return h(n,{expected:A.joinValues(r),received:n.parsedType,code:d.invalid_type}),k}if(this._cache||(this._cache=new Set(A.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=A.objectValues(t);return h(n,{received:n.data,code:d.invalid_enum_value,options:r}),k}return K(e.data)}get enum(){return this._def.values}}es.create=(s,e)=>new es(c({values:s,typeName:x.ZodNativeEnum},S(e)));class ot extends T{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.promise&&t.common.async===!1)return h(t,{code:d.invalid_type,expected:p.promise,received:t.parsedType}),k;const n=t.parsedType===p.promise?t.data:Promise.resolve(t.data);return K(n.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ot.create=(s,e)=>new ot(c({type:s,typeName:x.ZodPromise},S(e)));class re extends T{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:i=>{h(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const i=r.transform(n.data,a);if(n.common.async)return Promise.resolve(i).then(o=>N(this,null,function*(){if(t.value==="aborted")return k;const l=yield this._def.schema._parseAsync({data:o,path:n.path,parent:n});return l.status==="aborted"?k:l.status==="dirty"||t.value==="dirty"?Le(l.value):l}));{if(t.value==="aborted")return k;const o=this._def.schema._parseSync({data:i,path:n.path,parent:n});return o.status==="aborted"?k:o.status==="dirty"||t.value==="dirty"?Le(o.value):o}}if(r.type==="refinement"){const i=o=>{const l=r.refinement(o,a);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?k:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?k:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(r.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ee(i))return k;const o=r.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Ee(i)?Promise.resolve(r.transform(i.value,a)).then(o=>({status:t.value,value:o})):k);A.assertNever(r)}}re.create=(s,e,t)=>new re(c({schema:s,typeName:x.ZodEffects,effect:e},S(t)));re.createWithPreprocess=(s,e,t)=>new re(c({schema:e,effect:{type:"preprocess",transform:s},typeName:x.ZodEffects},S(t)));class fe extends T{_parse(e){return this._getType(e)===p.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fe.create=(s,e)=>new fe(c({innerType:s,typeName:x.ZodOptional},S(e)));class Ie extends T{_parse(e){return this._getType(e)===p.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ie.create=(s,e)=>new Ie(c({innerType:s,typeName:x.ZodNullable},S(e)));class $e extends T{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===p.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}$e.create=(s,e)=>new $e(c({innerType:s,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},S(e)));class bt extends T{_parse(e){const{ctx:t}=this._processInputParams(e),n=C(c({},t),{common:C(c({},t.common),{issues:[]})}),r=this._def.innerType._parse({data:n.data,path:n.path,parent:c({},n)});return rt(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new he(n.common.issues)},input:n.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new he(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}bt.create=(s,e)=>new bt(c({innerType:s,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},S(e)));class ts extends T{_parse(e){if(this._getType(e)!==p.nan){const n=this._getOrReturnCtx(e);return h(n,{code:d.invalid_type,expected:p.nan,received:n.parsedType}),k}return{status:"valid",value:e.data}}}ts.create=s=>new ts(c({typeName:x.ZodNaN},S(s)));class fr extends T{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Tt extends T{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return N(this,null,function*(){const a=yield this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?k:a.status==="dirty"?(t.dirty(),Le(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})});{const r=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?k:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:n.path,parent:n})}}static create(e,t){return new Tt({in:e,out:t,typeName:x.ZodPipeline})}}class xt extends T{_parse(e){const t=this._def.innerType._parse(e),n=r=>(Ee(r)&&(r.value=Object.freeze(r.value)),r);return rt(t)?t.then(r=>n(r)):n(t)}unwrap(){return this._def.innerType}}xt.create=(s,e)=>new xt(c({innerType:s,typeName:x.ZodReadonly},S(e)));I.lazycreate;var x;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(x||(x={}));const Ur=se.create,qr=at.create;ke.create;ne.create;const hr=I.create;I.strictCreate;Fe.create;Te.create;we.create;Re.create;Ve.create;ot.create;re.create;fe.create;Ie.create;re.createWithPreprocess;const Ce=(s,e)=>s.constructor.name===e.name,U=new Map;U.set(at.name,()=>!1),U.set(Oe.name,()=>0),U.set(se.name,()=>""),U.set(ne.name,()=>[]),U.set(Re.name,()=>({})),U.set($e.name,s=>s._def.defaultValue()),U.set(re.name,s=>Be(s._def.schema)),U.set(fe.name,s=>Ce(s._def.innerType,$e)?s._def.innerType._def.defaultValue():void 0),U.set(we.name,s=>{const e=[];for(const t of s._def.items)e.push(Be(t));return e}),U.set(re.name,s=>Be(s._def.schema)),U.set(Fe.name,s=>Be(s._def.options[0])),U.set(I.name,s=>_e(s)),U.set(Re.name,s=>_e(s)),U.set(Te.name,s=>_e(s));function Be(s){const e=s.constructor.name;if(!U.has(e)){console.warn("getSchemaDefaultForField: Unhandled type",s.constructor.name);return}return U.get(e)(s)}function _e(s){if(Ce(s,Re))return{};if(Ce(s,re))return _e(s._def.schema);if(Ce(s,Te))return c(c({},_e(s._def.left)),_e(s._def.right));if(Ce(s,Fe)){for(const e of s._def.options)if(Ce(e,I))return _e(e);return console.warn("getSchemaDefaultObject: No object found in union, returning empty object"),{}}return Ce(s,I)?Object.fromEntries(Object.entries(s.shape).map(([e,t])=>[e,Be(t)]).filter(e=>e[1]!==void 0)):(console.warn(`getSchemaDefaultObject: Expected object schema, got ${s.constructor.name}`),{})}function mr(s){return _e(s)}const[pr,yr]=Ot("VbenFormProps"),[gr,vr]=Ot("ComponentRefMap");function _r(s){var o;const e=Is(),t=a(),n=Ks(c({},(o=Object.keys(t))!=null&&o.length?{initialValues:t}:{})),r=V(()=>{const l=[];for(const u of Object.keys(e))u!=="default"&&l.push(u);return l});function a(){const l={},u={};(g(s).schema||[]).forEach(_=>{if(Reflect.has(_,"defaultValue"))yt(l,_.fieldName,_.defaultValue);else if(_.rules&&!de(_.rules)){const b=i(_.rules);u[_.fieldName]=_.rules,b!==void 0&&(l[_.fieldName]=b)}});const f=mr(hr(u)),m={};for(const _ in f)yt(m,_,f[_]);return ze(l,m)}function i(l){if(l instanceof se)return"";if(l instanceof Oe)return null;if(l instanceof I){const u={};for(const[f,m]of Object.entries(l.shape))u[f]=i(m);return u}else if(l instanceof Te){const u=i(l._def.left),f=i(l._def.right);return typeof u=="object"&&typeof f=="object"?c(c({},u),f):u!=null?u:f}else return}return{delegatedSlots:r,form:n}}const br=me({__name:"form-actions",props:{modelValue:{default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(s,{expose:e}){const{$t:t}=en(),[n,r]=pr(),a=is(s,"modelValue"),i=V(()=>c({content:`${t.value("reset")}`,show:!0},g(n).resetButtonOptions)),o=V(()=>c({content:`${t.value("submit")}`,show:!0},g(n).submitButtonOptions));function l(m){return N(this,null,function*(){var w,O;m==null||m.preventDefault(),m==null||m.stopPropagation();const _=g(n);if(!_.formApi)return;const{valid:b}=yield _.formApi.validate();if(!b)return;const M=(w=Se(yield _.formApi.getValues()))!=null?w:{};yield(O=_.handleSubmit)==null?void 0:O.call(_,M)})}function u(m){return N(this,null,function*(){var M,w,O;m==null||m.preventDefault(),m==null||m.stopPropagation();const _=g(n),b=(w=Se(yield(M=_.formApi)==null?void 0:M.getValues()))!=null?w:{};H(_.handleReset)?yield(O=_.handleReset)==null?void 0:O.call(_,b):r.resetForm()})}xe(()=>a.value,()=>{g(n).collapseTriggerResize&&$s()});const f=V(()=>{const m=g(n),_=m.actionLayout||"rowEnd",b=m.actionPosition||"right",M=["flex","items-center","gap-3",m.compact?"pb-2":"pb-4",m.layout==="vertical"?"self-end":"self-center",m.layout==="inline"?"":"w-full",m.actionWrapperClass];switch(_){case"newLine":{M.push("col-span-full");break}case"rowEnd":{M.push("col-[-2/-1]");break}}switch(b){case"center":{M.push("justify-center");break}case"left":{M.push("justify-start");break}default:{M.push("justify-end");break}}return M.join(" ")});return e({handleReset:u,handleSubmit:l}),(m,_)=>($(),be("div",{class:ie(g(X)(f.value))},[g(n).actionButtonsReverse?($(),be(mt,{key:0},[D(m.$slots,"submit-before"),o.value.show?($(),L(Ue(g(tt).PrimaryButton),oe({key:0,type:"button",onClick:l},o.value),{default:Z(()=>[et(je(o.value.content),1)]),_:1},16)):B("",!0)],64)):B("",!0),D(m.$slots,"reset-before"),i.value.show?($(),L(Ue(g(tt).DefaultButton),oe({key:1,type:"button",onClick:u},i.value),{default:Z(()=>[et(je(i.value.content),1)]),_:1},16)):B("",!0),g(n).actionButtonsReverse?B("",!0):($(),be(mt,{key:2},[D(m.$slots,"submit-before"),o.value.show?($(),L(Ue(g(tt).PrimaryButton),oe({key:0,type:"button",onClick:l},o.value),{default:Z(()=>[et(je(o.value.content),1)]),_:1},16)):B("",!0)],64)),D(m.$slots,"expand-before"),g(n).showCollapseButton?($(),L(g(An),{key:3,class:"ml-[-0.3em]","model-value":a.value,"onUpdate:modelValue":_[0]||(_[0]=b=>a.value=b)},{default:Z(()=>[qe("span",null,je(a.value?g(t)("expand"):g(t)("collapse")),1)]),_:1},8,["model-value"])):B("",!0),D(m.$slots,"expand-after")],2))}});const ss=s=>s!==null&&!!s&&typeof s=="object"&&!Array.isArray(s);function gs(s){return Number(s)>=0}function xr(s){return typeof s=="object"&&s!==null}function kr(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}function ns(s){if(!xr(s)||kr(s)!=="[object Object]")return!1;if(Object.getPrototypeOf(s)===null)return!0;let e=s;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e}function vs(s,e){return Object.keys(e).forEach(t=>{if(ns(e[t])&&ns(s[t])){s[t]||(s[t]={}),vs(s[t],e[t]);return}s[t]=e[t]}),s}function wr(s){const e=s.split(".");if(!e.length)return"";let t=String(e[0]);for(let n=1;n<e.length;n++){if(gs(e[n])){t+=`[${e[n]}]`;continue}t+=`.${e[n]}`}return t}function Cr(s,e){return{__type:"VVTypedSchema",parse(r){return N(this,null,function*(){const a=yield s.safeParseAsync(r,e);if(a.success)return{value:a.data,errors:[]};const i={};return _s(a.error.issues,i),{errors:Object.values(i)}})},cast(r){try{return s.parse(r)}catch(a){const i=bs(s);return ss(i)&&ss(r)?vs(i,r):r}},describe(r){try{if(!r)return{required:!s.isOptional(),exists:!0};const a=Sr(r,s);return a?{required:!a.isOptional(),exists:!0}:{required:!1,exists:!1}}catch(a){return{required:!1,exists:!1}}}}}function _s(s,e){s.forEach(t=>{const n=wr(t.path.join("."));t.code==="invalid_union"&&(_s(t.unionErrors.flatMap(r=>r.issues),e),!n)||(e[n]||(e[n]={errors:[],path:n}),e[n].errors.push(t.message))})}function bs(s){if(s instanceof I)return Object.fromEntries(Object.entries(s.shape).map(([e,t])=>t instanceof $e?[e,t._def.defaultValue()]:t instanceof I?[e,bs(t)]:[e,void 0]))}function Sr(s,e){if(!rs(e))return null;if(tn(s))return e.shape[sn(s)];const t=(s||"").split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let r=0;r<=t.length;r++){const a=t[r];if(!a||!n)return n;if(rs(n)){n=n.shape[a]||null;continue}gs(a)&&Or(n)&&(n=n._def.type)}return null}function xs(s){return s._def.typeName}function Or(s){return xs(s)===x.ZodArray}function rs(s){return xs(s)===x.ZodObject}const[Rt,Tr]=Ot("FormRenderProps"),Rr=()=>{const s=Rt(),e=V(()=>s.layout==="vertical"),t=V(()=>s.componentMap);return{componentBindEventMap:V(()=>s.componentBindEventMap),componentMap:t,isVertical:e}};function Nr(s){const e=fs(),n=Rt().form;if(!e)throw new Error("useDependencies should be used within <VbenForm>");const r=ue(!0),a=ue(!1),i=ue(!0),o=ue(!1),l=ue({}),u=ue(),f=V(()=>{var b,M;return((M=(b=s())==null?void 0:b.triggerFields)!=null?M:[]).map(w=>e.value[w])}),m=()=>{a.value=!1,r.value=!0,i.value=!0,o.value=!1,u.value=void 0,l.value={}};return xe([f,s],M=>N(null,[M],function*([_,b]){var J;if(!b||!((J=b==null?void 0:b.triggerFields)!=null&&J.length))return;m();const{componentProps:w,disabled:O,if:E,required:P,rules:R,show:F,trigger:Y}=b,G=e.value;if(H(E)){if(r.value=!!(yield E(G,n)),!r.value)return}else if(dt(E)&&(r.value=E,!r.value))return;if(H(F)){if(i.value=!!(yield F(G,n)),!i.value)return}else if(dt(F)&&(i.value=F,!i.value))return;H(w)&&(l.value=yield w(G,n)),H(R)&&(u.value=yield R(G,n)),H(O)?a.value=!!(yield O(G,n)):dt(O)&&(a.value=O),H(P)&&(o.value=!!(yield P(G,n))),H(Y)&&(yield Y(G,n))}),{deep:!0,immediate:!0}),{dynamicComponentProps:l,dynamicRules:u,isDisabled:a,isIf:r,isRequired:o,isShow:i}}const Ar={key:0,class:"mr-[2px] text-destructive"},Er={key:2,class:"ml-[2px]"},Fr=me({__name:"form-label",props:{class:{},colon:{type:Boolean},help:{type:[Function,String]},label:{type:[Function,String]},required:{type:Boolean}},setup(s){const e=s;return(t,n)=>($(),L(g(pn),{class:ie(g(X)("flex items-center",e.class))},{default:Z(()=>[s.required?($(),be("span",Ar,"*")):B("",!0),D(t.$slots,"default"),s.help?($(),L(g(Nn),{key:1,"trigger-class":"size-3.5 ml-1"},{default:Z(()=>[te(g(De),{content:s.help},null,8,["content"])]),_:1})):B("",!0),s.colon&&s.label?($(),be("span",Er,":")):B("",!0)]),_:3},8,["class"]))}});function kt(s){return!s||de(s)?null:"innerType"in s._def?kt(s._def.innerType):"schema"in s._def?kt(s._def.schema):s}function wt(s){if(!s||de(s))return;const e=s;if(e._def.typeName==="ZodDefault")return e._def.defaultValue();if("innerType"in e._def)return wt(e._def.innerType);if("schema"in e._def)return wt(e._def.schema)}function as(s){return!s||!Ct(s)?!1:Reflect.has(s,"target")&&Reflect.has(s,"stopPropagation")}const Vr={class:"flex-auto overflow-hidden p-[1px]"},Ir={key:0,class:"ml-1"},$r=me({__name:"form-field",props:{component:{},componentProps:{type:Function},defaultValue:{},dependencies:{},description:{type:[Function,String]},fieldName:{},help:{type:[Function,String]},hide:{type:Boolean},label:{type:[Function,String]},renderComponentContent:{type:Function},rules:{},suffix:{type:[Function,String]},colon:{type:Boolean},controlClass:{},disabled:{type:Boolean},disabledOnChangeListener:{type:Boolean},disabledOnInputListener:{type:Boolean},emptyStateValue:{},formFieldProps:{},formItemClass:{type:[Function,String]},hideLabel:{type:Boolean},hideRequiredMark:{type:Boolean},labelClass:{},labelWidth:{},modelPropName:{},wrapperClass:{},commonComponentProps:{}},setup(s){const{componentBindEventMap:e,componentMap:t,isVertical:n}=Rr(),r=Rt(),a=fs(),i=nn(s.fieldName),o=os("fieldComponentRef"),l=r.form,u=V(()=>r.compact),f=V(()=>{var v;return((v=i.value)==null?void 0:v.length)>0}),m=V(()=>{const v=de(s.component)?t.value[s.component]:s.component;return v||console.warn(`Component ${s.component} is not registered`),v}),{dynamicComponentProps:_,dynamicRules:b,isDisabled:M,isIf:w,isRequired:O,isShow:E}=Nr(()=>s.dependencies),P=V(()=>{var v;return(v=s.labelClass)!=null&&v.includes("w-")||n.value?{}:{width:`${s.labelWidth}px`}}),R=V(()=>b.value||s.rules),F=V(()=>!s.hide&&w.value&&E.value),Y=V(()=>{var q,z,pe,Me,Ze,Pe;if(!F.value)return!1;if(!R.value)return O.value;if(O.value)return!0;if(de(R.value))return["required","selectRequired"].includes(R.value);let v=(z=(q=R==null?void 0:R.value)==null?void 0:q.isOptional)==null?void 0:z.call(q);if(((Me=(pe=R==null?void 0:R.value)==null?void 0:pe._def)==null?void 0:Me.typeName)==="ZodDefault"){const ee=(Ze=R==null?void 0:R.value)==null?void 0:Ze._def.innerType;ee&&(v=(Pe=ee.isOptional)==null?void 0:Pe.call(ee))}return!v}),G=V(()=>{var q;if(!F.value)return null;let v=R.value;if(!v)return O.value?"required":null;if(de(v))return v;if(!!Y.value){const z=(q=v==null?void 0:v.unwrap)==null?void 0:q.call(v);z&&(v=z)}return Cr(v)}),J=V(()=>{const v=H(s.componentProps)?s.componentProps(a.value,l):s.componentProps;return c(c(c({},s.commonComponentProps),v),_.value)});xe(()=>{var v;return(v=J.value)==null?void 0:v.autofocus},v=>{v===!0&&st(()=>{Qe()})},{immediate:!0});const Ye=V(()=>{var v;return M.value||s.disabled||((v=J.value)==null?void 0:v.disabled)}),Ge=V(()=>H(s.renderComponentContent)?s.renderComponentContent(a.value,l):{}),lt=V(()=>Object.keys(Ge.value)),ct=V(()=>{const v=G.value;return c(c({keepValue:!0,label:de(s.label)?s.label:""},v?{rules:v}:{}),s.formFieldProps)});function ae(v){var Me,Ze,Pe;const j=v.componentField.modelValue,q=v.componentField["onUpdate:modelValue"],z=s.modelPropName||(de(s.component)?(Me=e.value)==null?void 0:Me[s.component]:null);let pe=j;return j&&Ct(j)&&z&&(pe=as(j)?(Ze=j==null?void 0:j.target)==null?void 0:Ze[z]:(Pe=j==null?void 0:j[z])!=null?Pe:j),z?c({[`onUpdate:${z}`]:q,[z]:pe===void 0?s.emptyStateValue:pe,onChange:s.disabledOnChangeListener?void 0:ee=>{var Nt,At,Et;const ks=as(ee),Ne=(Nt=v==null?void 0:v.componentField)==null?void 0:Nt.onChange;return ks?Ne==null?void 0:Ne((Et=(At=ee==null?void 0:ee.target)==null?void 0:At[z])!=null?Et:ee):Ne==null?void 0:Ne(ee)}},s.disabledOnInputListener?{onInput:void 0}:{}):c(c({},s.disabledOnInputListener?{onInput:void 0}:{}),s.disabledOnChangeListener?{onChange:void 0}:{})}function Je(v){const j=ae(v);return c(c(c(c(c({},v.componentField),J.value),j),Reflect.has(J.value,"onChange")?{onChange:J.value.onChange}:{}),Reflect.has(J.value,"onInput")?{onInput:J.value.onInput}:{})}function Qe(){var v,j;o.value&&H(o.value.focus)&&document.activeElement!==o.value&&((j=(v=o.value)==null?void 0:v.focus)==null||j.call(v))}const ce=gr();return xe(o,v=>{ce==null||ce.set(s.fieldName,v)}),Ms(()=>{ce!=null&&ce.has(s.fieldName)&&ce.delete(s.fieldName)}),(v,j)=>!s.hide&&g(w)?($(),L(g(rn),oe({key:0},ct.value,{name:s.fieldName}),{default:Z(q=>[Zs(te(g(vn),oe({class:[{"form-valid-error":f.value,"form-is-required":Y.value,"flex-col":g(n),"flex-row items-center":!g(n),"pb-4":!u.value,"pb-2":u.value},"relative flex"]},v.$attrs),{default:Z(()=>[s.hideLabel?B("",!0):($(),L(Fr,{key:0,class:ie(g(X)("flex leading-6",{"mr-2 flex-shrink-0 justify-end":!g(n),"mb-1 flex-row":g(n)},s.labelClass)),help:s.help,colon:s.colon,label:s.label,required:Y.value&&!s.hideRequiredMark,style:Ps(P.value)},{default:Z(()=>[s.label?($(),L(g(De),{key:0,content:s.label},null,8,["content"])):B("",!0)]),_:1},8,["class","help","colon","label","required","style"])),qe("div",Vr,[qe("div",{class:ie(g(X)("relative flex w-full items-center",s.wrapperClass))},[te(g(yn),{class:ie(g(X)(s.controlClass))},{default:Z(()=>[D(v.$slots,"default",ye(ge(C(c(c({},q),Je(q)),{disabled:Ye.value,isInValid:f.value}))),()=>[($(),L(Ue(m.value),oe({ref_key:"fieldComponentRef",ref:o,class:{"border-destructive hover:border-destructive/80 focus:border-destructive focus:shadow-[0_0_0_2px_rgba(255,38,5,0.06)]":f.value}},Je(q),{disabled:Ye.value}),ls({_:2},[St(lt.value,z=>({name:z,fn:Z(pe=>[te(g(De),oe({content:Ge.value[z]},C(c({},pe),{formContext:q})),null,16,["content"])])}))]),1040,["class","disabled"])),u.value&&f.value?($(),L(g(ds),{key:0,"delay-duration":300,side:"left"},{trigger:Z(()=>[D(v.$slots,"trigger",{},()=>[te(g(Tn),{class:ie(g(X)("inline-flex size-5 cursor-pointer text-foreground/80 hover:text-foreground"))},null,8,["class"])])]),default:Z(()=>[te(g(jt))]),_:3})):B("",!0)])]),_:2},1032,["class"]),s.suffix?($(),be("div",Ir,[te(g(De),{content:s.suffix},null,8,["content"])])):B("",!0),s.description?($(),L(g(gn),{key:1,class:"ml-1"},{default:Z(()=>[te(g(De),{content:s.description},null,8,["content"])]),_:1})):B("",!0)],2),u.value?B("",!0):($(),L(on,{key:0,name:"slide-up"},{default:Z(()=>[te(g(jt),{class:"absolute"})]),_:1}))])]),_:2},1040,["class"]),[[an,g(E)]])]),_:3},16,["name"])):B("",!0)}});function Mr(s){const e=os("wrapperRef"),t=js(e),n=ue({}),r=ue(!1),a=Ds(Ls),i=V(()=>{var m,_;const l=(m=s.collapsedRows)!=null?m:1,u=n.value;let f=0;for(let b=1;b<=l;b++)f+=(_=u==null?void 0:u[b])!=null?_:0;return f-1||1});xe([()=>s.showCollapseButton,()=>a.active().value,()=>{var l;return(l=s.schema)==null?void 0:l.length},()=>t.value],u=>N(null,[u],function*([l]){l&&(yield st(),n.value={},r.value=!1,yield o())}));function o(){return N(this,null,function*(){if(!s.showCollapseButton||(yield st(),!e.value))return;const l=[...e.value.children],u=e.value,m=window.getComputedStyle(u).getPropertyValue("grid-template-rows").split(" "),_=u==null?void 0:u.getBoundingClientRect();l.forEach(b=>{var P,R;const w=b.getBoundingClientRect().top-_.top;let O=0,E=0;for(const[F,Y]of m.entries())if(E+=Number.parseFloat(Y),w<E){O=F+1;break}O>((P=s==null?void 0:s.collapsedRows)!=null?P:1)||(n.value[O]=((R=n.value[O])!=null?R:0)+1,r.value=!0)})})}return cs(()=>{o()}),{isCalculated:r,keepFormItemIndex:i,wrapperRef:e}}const Zr=me({__name:"form",props:{arrayToStringFields:{},collapsed:{type:Boolean},collapsedRows:{default:1},collapseTriggerResize:{type:Boolean},commonConfig:{default:()=>({})},compact:{type:Boolean},componentBindEventMap:{},componentMap:{},fieldMappingTime:{},form:{},layout:{},schema:{},showCollapseButton:{type:Boolean,default:!1},wrapperClass:{default:"grid-cols-1 sm:grid-cols-2 md:grid-cols-3"},globalCommonConfig:{default:()=>({})}},emits:["submit"],setup(s,{emit:e}){const t=s,n=e,r=V(()=>{const b=["flex"];return t.layout==="inline"?b.push("flex-wrap gap-x-2"):b.push(t.compact?"gap-x-2":"gap-x-4","flex-col grid"),X(...b,t.wrapperClass)});Tr(t);const{isCalculated:a,keepFormItemIndex:i,wrapperRef:o}=Mr(t),l=V(()=>{var M;const b=[];return(M=t.schema)==null||M.forEach(w=>{const{fieldName:O}=w,E=w.rules;let P="";E&&!de(E)&&(P=E._def.typeName);const R=kt(E);b.push({default:wt(E),fieldName:O,required:!["ZodNullable","ZodOptional"].includes(P),rules:R})}),b}),u=V(()=>t.form?"form":ln),f=V(()=>t.form?{onSubmit:t.form.handleSubmit(b=>n("submit",b))}:{onSubmit:b=>n("submit",b)}),m=V(()=>t.collapsed&&a.value),_=V(()=>{const{colon:b=!1,componentProps:M={},controlClass:w="",disabled:O,disabledOnChangeListener:E=!0,disabledOnInputListener:P=!0,emptyStateValue:R=void 0,formFieldProps:F={},formItemClass:Y="",hideLabel:G=!1,hideRequiredMark:J=!1,labelClass:Ye="",labelWidth:Ge=100,modelPropName:lt="",wrapperClass:ct=""}=ze(t.commonConfig,t.globalCommonConfig);return(t.schema||[]).map((ae,Je)=>{const Qe=i.value,ce=t.showCollapseButton&&m.value&&Qe?Qe<=Je:!1;let v=ae.formItemClass;if(H(ae.formItemClass))try{v=ae.formItemClass()}catch(j){console.error("Error calling formItemClass function:",j),v=""}return C(c({colon:b,disabled:O,disabledOnChangeListener:E,disabledOnInputListener:P,emptyStateValue:R,hideLabel:G,hideRequiredMark:J,labelWidth:Ge,modelPropName:lt,wrapperClass:ct},ae),{commonComponentProps:M,componentProps:ae.componentProps,controlClass:X(w,ae.controlClass),formFieldProps:c(c({},F),ae.formFieldProps),formItemClass:X("flex-shrink-0",{hidden:ce},Y,v),labelClass:X(Ye,ae.labelClass)})})});return(b,M)=>($(),L(Ue(u.value),ye(ge(f.value)),{default:Z(()=>[qe("div",{ref_key:"wrapperRef",ref:o,class:ie(r.value)},[($(!0),be(mt,null,St(_.value,w=>($(),L($r,oe({key:w.fieldName,ref_for:!0},w,{class:w.formItemClass,rules:w.rules}),{default:Z(O=>[D(b.$slots,w.fieldName,oe({ref_for:!0},O))]),_:2},1040,["class","rules"]))),128)),D(b.$slots,"default",{shapes:l.value})],2)]),_:3},16))}}),Pr=me({__name:"vben-use-form",props:{formApi:{},actionButtonsReverse:{type:Boolean},actionLayout:{},actionPosition:{},actionWrapperClass:{},arrayToStringFields:{},fieldMappingTime:{},handleCollapsedChange:{type:Function},handleReset:{type:Function},handleSubmit:{type:Function},handleValuesChange:{type:Function},resetButtonOptions:{},scrollToFirstError:{type:Boolean},showDefaultActions:{type:Boolean},submitButtonOptions:{},submitOnChange:{type:Boolean},submitOnEnter:{type:Boolean},collapsed:{type:Boolean},collapsedRows:{},collapseTriggerResize:{type:Boolean},commonConfig:{},compact:{type:Boolean},layout:{},schema:{},showCollapseButton:{type:Boolean},wrapperClass:{}},setup(s){var m,_,b,M;const e=s,t=(_=(m=e.formApi)==null?void 0:m.useStore)==null?void 0:_.call(m),n=cn(e,t),r=new Map,{delegatedSlots:a,form:i}=_r(n);yr([n,i]),vr(r),(M=(b=e.formApi)==null?void 0:b.mount)==null||M.call(b,i,r);const o=w=>{var O,E,P;(O=e.formApi)==null||O.setState({collapsed:w}),(P=(E=n.value).handleCollapsedChange)==null||P.call(E,w)};function l(w){var O,E;!(t!=null&&t.value.submitOnEnter)||!((O=n.value.formApi)!=null&&O.isMounted)||w.target instanceof HTMLTextAreaElement||(w.preventDefault(),(E=n.value.formApi)==null||E.validateAndSubmitForm())}const u=zs(()=>N(null,null,function*(){var w;t!=null&&t.value.submitOnChange&&((w=n.value.formApi)==null||w.validateAndSubmitForm())}),300),f={};return cs(()=>N(null,null,function*(){yield st(),xe(()=>i.values,w=>N(null,null,function*(){var O,E;if(n.value.handleValuesChange){const P=(O=t==null?void 0:t.value.schema)==null?void 0:O.map(R=>R.fieldName);if(P&&P.length>0){const R=[];if(P.forEach(F=>{const Y=pt(w,F),G=pt(f,F);hn(Y,G)||(R.push(F),yt(f,F,Y))}),R.length>0){const F=yield(E=n.value.formApi)==null?void 0:E.getValues();n.value.handleValuesChange(Bs(F!=null?F:{}),R)}}}u()}),{deep:!0})})),(w,O)=>{var E;return $(),L(g(Zr),oe({onKeydown:fn(l,["enter"])},g(n),{collapsed:(E=g(t))==null?void 0:E.collapsed,"component-bind-event-map":g(dn),"component-map":g(tt),form:g(i),"global-common-config":g(un)}),ls({default:Z(P=>[D(w.$slots,"default",ye(ge(P)),()=>{var R;return[g(n).showDefaultActions?($(),L(br,{key:0,"model-value":(R=g(t))==null?void 0:R.collapsed,"onUpdate:modelValue":o},{"reset-before":Z(F=>[D(w.$slots,"reset-before",ye(ge(F)))]),"submit-before":Z(F=>[D(w.$slots,"submit-before",ye(ge(F)))]),"expand-before":Z(F=>[D(w.$slots,"expand-before",ye(ge(F)))]),"expand-after":Z(F=>[D(w.$slots,"expand-after",ye(ge(F)))]),_:3},8,["model-value"])):B("",!0)]})]),_:2},[St(g(a),P=>({name:P,fn:Z(R=>[D(w.$slots,P,ye(ge(R)))])}))]),1040,["collapsed","component-bind-event-map","component-map","form","global-common-config"])}}});function Wr(s){const e=Us(s),t=new Dn(s),n=t;n.useStore=a=>Zn(t.store,a);const r=me((a,{attrs:i,slots:o})=>(qs(()=>{t.unmount()}),t.setState(c(c({},a),i)),()=>Ws(Pr,C(c(c({},a),i),{formApi:n}),o)),{name:"VbenUseForm",inheritAttrs:!1});return e&&xe(()=>s.schema,()=>{t.setState({schema:s.schema})},{immediate:!0}),[r,n]}export{Tn as C,Mn as S,Nn as _,Rn as a,qr as b,Zn as c,Ur as s,Wr as u};
