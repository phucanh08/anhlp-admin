var D=Object.defineProperty,S=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var C=(t,e,r)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,v=(t,e)=>{for(var r in e||(e={}))z.call(e,r)&&C(t,r,e[r]);if(k)for(var r of k(e))A.call(e,r)&&C(t,r,e[r]);return t},p=(t,e)=>S(t,L(e));var w=(t,e,r)=>new Promise((s,u)=>{var h=a=>{try{n(r.next(a))}catch(o){u(o)}},P=a=>{try{n(r.throw(a))}catch(o){u(o)}},n=a=>a.done?s(a.value):Promise.resolve(a.value).then(h,P);n((r=r.apply(t,e)).next())});import{e as G,a as H,b as J,Q as U,u as V}from"./useBaseQuery-2uhPjY7o.js";function I(t){return{onFetch:(e,r)=>{var f,l,d,F,m;const s=e.options,u=(d=(l=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:l.fetchMore)==null?void 0:d.direction,h=((F=e.state.data)==null?void 0:F.pages)||[],P=((m=e.state.data)==null?void 0:m.pageParams)||[];let n={pages:[],pageParams:[]},a=0;const o=()=>w(null,null,function*(){var Q;let c=!1;const b=i=>{Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(e.signal.aborted?c=!0:e.signal.addEventListener("abort",()=>{c=!0}),e.signal)})},T=G(e.options,e.fetchOptions),O=(i,g,y)=>w(null,null,function*(){if(c)return Promise.reject();if(g==null&&i.pages.length)return Promise.resolve(i);const j=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:g,direction:y?"backward":"forward",meta:e.options.meta};return b(M),M})(),B=yield T(j),{maxPages:q}=e.options,E=y?H:J;return{pages:E(i.pages,B,q),pageParams:E(i.pageParams,g,q)}});if(u&&h.length){const i=u==="backward",g=i?K:N,y={pages:h,pageParams:P},R=g(s,y);n=yield O(y,R,i)}else{const i=t!=null?t:h.length;do{const g=a===0?(Q=P[0])!=null?Q:s.initialPageParam:N(s,n);if(a>0&&g==null)break;n=yield O(n,g),a++}while(a<i)}return n});e.options.persister?e.fetchFn=()=>{var c,b;return(b=(c=e.options).persister)==null?void 0:b.call(c,o,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=o}}}function N(t,{pages:e,pageParams:r}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,r[s],r):void 0}function K(t,{pages:e,pageParams:r}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,r[0],r):void 0}function W(t,e){return e?N(t,e)!=null:!1}function X(t,e){return!e||!t.getPreviousPageParam?!1:K(t,e)!=null}var Y=class extends U{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions(p(v({},t),{behavior:I()}))}getOptimisticResult(t){return t.behavior=I(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch(p(v({},t),{meta:{fetchMore:{direction:"forward"}}}))}fetchPreviousPage(t){return this.fetch(p(v({},t),{meta:{fetchMore:{direction:"backward"}}}))}createResult(t,e){var m,c;const{state:r}=t,s=super.createResult(t,e),{isFetching:u,isRefetching:h,isError:P,isRefetchError:n}=s,a=(c=(m=r.fetchMeta)==null?void 0:m.fetchMore)==null?void 0:c.direction,o=P&&a==="forward",f=u&&a==="forward",l=P&&a==="backward",d=u&&a==="backward";return p(v({},s),{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:W(e,r.data),hasPreviousPage:X(e,r.data),isFetchNextPageError:o,isFetchingNextPage:f,isFetchPreviousPageError:l,isFetchingPreviousPage:d,isRefetchError:n&&!o&&!l,isRefetching:h&&!f&&!d})}};function $(t,e){return V(Y,t)}export{Y as I,I as i,$ as u};
